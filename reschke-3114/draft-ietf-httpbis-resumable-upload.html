<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Resumable Uploads for HTTP</title>
<meta content="Marius Kleidl" name="author">
<meta content="Guoye Zhang" name="author">
<meta content="Lucas Pardue" name="author">
<meta content="
       Data transfer using the Hypertext Transfer Protocol (HTTP) is often interrupted by canceled requests or dropped connections. If the intended recipient can indicate how much of the data was received prior to interruption, a sender can resume data transfer at that point instead of attempting to transfer all of the data again. HTTP range requests support this concept of resumable downloads from server to client. This document describes a mechanism that supports resumable uploads from client to server using HTTP. 
    " name="description">
<meta content="xml2rfc 3.29.0" name="generator">
<meta content="HTTP, upload, resumable" name="keyword">
<meta content="draft-ietf-httpbis-resumable-upload-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.29.0
    Python 3.12.11
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.1.0
    Jinja2 3.1.6
    lxml 5.3.1
    platformdirs 4.3.8
    pycountry 24.6.1
    PyYAML 6.0.2
    requests 2.32.4
    setuptools 80.9.0
    wcwidth 0.2.13
-->
<link href="draft-ietf-httpbis-resumable-upload.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  --font-title: "Sofia Sans Semi Condensed", sans-serif;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
section {
  clear: both;
}
.section-number {
  padding-right: 0.5em;
}
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-title);
  font-weight: 680;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
  vertical-align: top;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
  & :is(ol, ul) {
    margin-left: 1em;
  }
}
li {
  margin: 0 0 0.25em 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
  & li {
    margin-top: 0.5em;
  }
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  margin: 0 0 0 2em;
  & li {
    margin: 0;
    & :first-child { margin-top: 0; }
    & :last-child { margin-bottom: 0; }
  }
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
  &.olPercent {
    --indent: 5ch;
    & > dt {
      min-width: calc(var(--indent) - 2ch);
    }
  }
  &.olPercent > dt {
    float: none;
  }

  dl > dd > & {
    margin-top: 0.5em;
    margin-bottom: 0;
  }
}
dl:not(.dlNewline) > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
  & > :is(:first-child, .break:first-child + *) {
    margin-top: 0;
  }
  & > :is(:last-child) {
    margin-bottom: 0;
  }
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
  caption-side: bottom;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    /* In the horizontal direction, sometimes people make over-sized figures.
       Scrollbars for those is therefore necessary: auto adds them as necessary..
       In the vertical direction, the line-height can combine with the font
       asender/descender height to produce scrollbars: hidden avoids that. */
    overflow: auto hidden;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: auto;
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
  &[href] {
    color: var(--pilcrow-weak);
    &:hover { text-decoration: none; }
  }
}
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
  & dt {
    width: var(--identifier-width);
    min-width: var(--identifier-width);
    clear: left;
    float: left;
    text-align: right;
    margin-right: 1ch;
  }
  & dd {
    margin: 0;
    margin-left: calc(1em + var(--identifier-width)) !important;
    min-width: 5em;
  }
  & .authors {
    & .author {
      display: inline-block;
      margin-right: 1.5em;
    }
    & .org {
      font-style: italic;
    }
  }
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;

  & nav {
    & ul {
      margin: 0 0.5em 0 0;
      padding: 0;
      list-style: none;
    }
    & li {
      line-height: 1.3em;
      margin: 2px 0;
      padding-left: 1.2em;
      text-indent: -1.2em;
    }
  }
  & a.xref {
    white-space: normal;
  }
}

.references {
  & > dt {
    text-align: right;
    font-weight: bold;
    min-width: 10ch;
    margin-right: 1.5ch;
    &:target::before {
      content: "⇒";
      margin: 0 10px 0 -25px;
    }
  }
  & > dd {
    margin-left: 12ch !important;
    overflow: visible;
    & .refInstance {
      margin-bottom: 0.8em;
    }
    & .ascii {
      margin-bottom: 0.25em;
    }
  }
}

#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  max-width: 20em;
  margin: 1em auto 1em 0;

  & .nameRole {
    font-weight: 700;
    margin-left: 0;
  }
  & .label {
    margin: 0.5em 0;
  }
  & .type {
    display: none;
  }
  & .alternative-contact {
    margin: 0.5em 0 0.25em 0;
  }
  & .non-ascii {
    margin: 0 0 0 2em;
  }
  & div.left {
    text-align: left;
  }
  & div.right {
    text-align: right;
  }
}

hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

/* Comments */
.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}

@media screen {
  #toc nav {
    font-family: var(--font-title);
    font-weight: 360;
    & > ul { margin-bottom: 2em; }
    & ul {
      margin: 0 0 0 4px;
      & :is(p, li) {
        margin: 2px 0;
      }
    }
  }
  #toc a.toplink {
    float: right;
  }
}
@media not screen {
  #toc a.toplink {
    display: none;
  }
}


/* TOC layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
    &::before { /* css hamburger */
      float: right;
      position: relative;
      width: 1em;
      height: 1px;
      left: -164px;
      margin: 8px 0 0 0;
      background: white none repeat scroll 0 0;
      box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
      content: "";
    }
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active {
    opacity: 1;
    & nav { display: block; }
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:is(:link, :focus, :hover),
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin: 2px 0.5em 0;
  }
}

/* TOC layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
  #toc a.toplink {
    margin: 8px 0.5em 0;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Resumable Uploads</td>
<td class="right">June 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Kleidl, et al.</td>
<td class="center">Expires 25 December 2025</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">HTTP</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-httpbis-resumable-upload-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-06-23" class="published">23 June 2025</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2025-12-25">25 December 2025</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Kleidl, <span class="editor">Ed.</span>
</div>
<div class="org">Transloadit</div>
</div>
<div class="author">
      <div class="author-name">G. Zhang, <span class="editor">Ed.</span>
</div>
<div class="org">Apple Inc.</div>
</div>
<div class="author">
      <div class="author-name">L. Pardue, <span class="editor">Ed.</span>
</div>
<div class="org">Cloudflare</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Resumable Uploads for HTTP</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">Data transfer using the Hypertext Transfer Protocol (HTTP) is often interrupted by canceled requests or dropped connections. If the intended recipient can indicate how much of the data was received prior to interruption, a sender can resume data transfer at that point instead of attempting to transfer all of the data again. HTTP range requests support this concept of resumable downloads from server to client. This document describes a mechanism that supports resumable uploads from client to server using HTTP.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-ietf-httpbis-resumable-upload/">https://datatracker.ietf.org/doc/draft-ietf-httpbis-resumable-upload/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        HTTP Working Group mailing list (<span><a href="mailto:ietf-http-wg@w3.org">mailto:ietf-http-wg@w3.org</a></span>),
        which is archived at <span><a href="https://lists.w3.org/Archives/Public/ietf-http-wg/">https://lists.w3.org/Archives/Public/ietf-http-wg/</a></span>.
        Working Group information can be found at <span><a href="https://httpwg.org/">https://httpwg.org/</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/httpwg/http-extensions/labels/resumable-upload">https://github.com/httpwg/http-extensions/labels/resumable-upload</a></span>.<a href="#section-note.1-4" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 25 December 2025.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-conventions-and-definitions" class="internal xref">Conventions and Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-overview" class="internal xref">Overview</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-example-1-complete-upload-o" class="internal xref">Example 1: Complete upload of representation data with known size</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-example-2-upload-as-a-serie" class="internal xref">Example 2: Upload as a series of parts</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-upload-resource" class="internal xref">Upload Resource</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-state" class="internal xref">State</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a href="#section-4.1.1" class="auto internal xref">4.1.1</a>.  <a href="#name-offset" class="internal xref">Offset</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.2">
                    <p id="section-toc.1-1.4.2.1.2.2.1"><a href="#section-4.1.2" class="auto internal xref">4.1.2</a>.  <a href="#name-completeness" class="internal xref">Completeness</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.3">
                    <p id="section-toc.1-1.4.2.1.2.3.1"><a href="#section-4.1.3" class="auto internal xref">4.1.3</a>.  <a href="#name-length" class="internal xref">Length</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.4">
                    <p id="section-toc.1-1.4.2.1.2.4.1"><a href="#section-4.1.4" class="auto internal xref">4.1.4</a>.  <a href="#name-limits" class="internal xref">Limits</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-upload-creation-2" class="internal xref">Upload Creation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a href="#section-4.2.1" class="auto internal xref">4.2.1</a>.  <a href="#name-client-behavior" class="internal xref">Client Behavior</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a href="#section-4.2.2" class="auto internal xref">4.2.2</a>.  <a href="#name-server-behavior" class="internal xref">Server Behavior</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.3">
                    <p id="section-toc.1-1.4.2.2.2.3.1"><a href="#section-4.2.3" class="auto internal xref">4.2.3</a>.  <a href="#name-examples" class="internal xref">Examples</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-offset-retrieval-2" class="internal xref">Offset Retrieval</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a href="#section-4.3.1" class="auto internal xref">4.3.1</a>.  <a href="#name-client-behavior-2" class="internal xref">Client Behavior</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.2">
                    <p id="section-toc.1-1.4.2.3.2.2.1"><a href="#section-4.3.2" class="auto internal xref">4.3.2</a>.  <a href="#name-server-behavior-2" class="internal xref">Server Behavior</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.3">
                    <p id="section-toc.1-1.4.2.3.2.3.1"><a href="#section-4.3.3" class="auto internal xref">4.3.3</a>.  <a href="#name-example" class="internal xref">Example</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="auto internal xref">4.4</a>.  <a href="#name-upload-append-2" class="internal xref">Upload Append</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4.2.1">
                    <p id="section-toc.1-1.4.2.4.2.1.1"><a href="#section-4.4.1" class="auto internal xref">4.4.1</a>.  <a href="#name-client-behavior-3" class="internal xref">Client Behavior</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4.2.2">
                    <p id="section-toc.1-1.4.2.4.2.2.1"><a href="#section-4.4.2" class="auto internal xref">4.4.2</a>.  <a href="#name-server-behavior-3" class="internal xref">Server Behavior</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4.2.3">
                    <p id="section-toc.1-1.4.2.4.2.3.1"><a href="#section-4.4.3" class="auto internal xref">4.4.3</a>.  <a href="#name-example-2" class="internal xref">Example</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="auto internal xref">4.5</a>.  <a href="#name-upload-cancellation-2" class="internal xref">Upload Cancellation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5.2.1">
                    <p id="section-toc.1-1.4.2.5.2.1.1"><a href="#section-4.5.1" class="auto internal xref">4.5.1</a>.  <a href="#name-client-behavior-4" class="internal xref">Client Behavior</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5.2.2">
                    <p id="section-toc.1-1.4.2.5.2.2.1"><a href="#section-4.5.2" class="auto internal xref">4.5.2</a>.  <a href="#name-server-behavior-4" class="internal xref">Server Behavior</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5.2.3">
                    <p id="section-toc.1-1.4.2.5.2.3.1"><a href="#section-4.5.3" class="auto internal xref">4.5.3</a>.  <a href="#name-example-3" class="internal xref">Example</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.6">
                <p id="section-toc.1-1.4.2.6.1"><a href="#section-4.6" class="auto internal xref">4.6</a>.  <a href="#name-concurrency" class="internal xref">Concurrency</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-status-code-104-upload-resu" class="internal xref">Status Code <code>104 (Upload Resumption Supported)</code></a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-media-type-application-part" class="internal xref">Media Type <code>application/partial-upload</code></a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-problem-types" class="internal xref">Problem Types</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-mismatching-offset" class="internal xref">Mismatching Offset</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-completed-upload" class="internal xref">Completed Upload</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.  <a href="#name-inconsistent-length" class="internal xref">Inconsistent Length</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-content-codings" class="internal xref">Content Codings</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-transfer-codings" class="internal xref">Transfer Codings</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-integrity-digests" class="internal xref">Integrity Digests</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-representation-digests" class="internal xref">Representation Digests</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-content-digests" class="internal xref">Content Digests</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-responses-to-uploads" class="internal xref">Responses to Uploads</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-upload-strategies" class="internal xref">Upload Strategies</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="auto internal xref">12.1</a>.  <a href="#name-optimistic-upload-creation" class="internal xref">Optimistic Upload Creation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1.2.1">
                    <p id="section-toc.1-1.12.2.1.2.1.1"><a href="#section-12.1.1" class="auto internal xref">12.1.1</a>.  <a href="#name-upgrading-to-resumable-uplo" class="internal xref">Upgrading To Resumable Uploads</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#section-12.2" class="auto internal xref">12.2</a>.  <a href="#name-careful-upload-creation" class="internal xref">Careful Upload Creation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="auto internal xref">13</a>. <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="auto internal xref">14</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.1">
                <p id="section-toc.1-1.14.2.1.1"><a href="#section-14.1" class="auto internal xref">14.1</a>.  <a href="#name-http-fields" class="internal xref">HTTP Fields</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.2">
                <p id="section-toc.1-1.14.2.2.1"><a href="#section-14.2" class="auto internal xref">14.2</a>.  <a href="#name-http-status-code" class="internal xref">HTTP Status Code</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.3">
                <p id="section-toc.1-1.14.2.3.1"><a href="#section-14.3" class="auto internal xref">14.3</a>.  <a href="#name-media-type" class="internal xref">Media Type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.4">
                <p id="section-toc.1-1.14.2.4.1"><a href="#section-14.4" class="auto internal xref">14.4</a>.  <a href="#name-http-problem-types" class="internal xref">HTTP Problem Types</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#section-15" class="auto internal xref">15</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.1">
                <p id="section-toc.1-1.15.2.1.1"><a href="#section-15.1" class="auto internal xref">15.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2">
                <p id="section-toc.1-1.15.2.2.1"><a href="#section-15.2" class="auto internal xref">15.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-changes" class="internal xref">Changes</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.1">
                <p id="section-toc.1-1.16.2.1.1"><a href="#appendix-A.1" class="auto internal xref"></a><a href="#name-since-draft-ietf-httpbis-re" class="internal xref">Since draft-ietf-httpbis-resumable-upload-09</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.2">
                <p id="section-toc.1-1.16.2.2.1"><a href="#appendix-A.2" class="auto internal xref"></a><a href="#name-since-draft-ietf-httpbis-res" class="internal xref">Since draft-ietf-httpbis-resumable-upload-08</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.3">
                <p id="section-toc.1-1.16.2.3.1"><a href="#appendix-A.3" class="auto internal xref"></a><a href="#name-since-draft-ietf-httpbis-resu" class="internal xref">Since draft-ietf-httpbis-resumable-upload-07</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.4">
                <p id="section-toc.1-1.16.2.4.1"><a href="#appendix-A.4" class="auto internal xref"></a><a href="#name-since-draft-ietf-httpbis-resum" class="internal xref">Since draft-ietf-httpbis-resumable-upload-06</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.5">
                <p id="section-toc.1-1.16.2.5.1"><a href="#appendix-A.5" class="auto internal xref"></a><a href="#name-since-draft-ietf-httpbis-resuma" class="internal xref">Since draft-ietf-httpbis-resumable-upload-05</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.6">
                <p id="section-toc.1-1.16.2.6.1"><a href="#appendix-A.6" class="auto internal xref"></a><a href="#name-since-draft-ietf-httpbis-resumab" class="internal xref">Since draft-ietf-httpbis-resumable-upload-04</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.7">
                <p id="section-toc.1-1.16.2.7.1"><a href="#appendix-A.7" class="auto internal xref"></a><a href="#name-since-draft-ietf-httpbis-resumabl" class="internal xref">Since draft-ietf-httpbis-resumable-upload-03</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.8">
                <p id="section-toc.1-1.16.2.8.1"><a href="#appendix-A.8" class="auto internal xref"></a><a href="#name-since-draft-ietf-httpbis-resumable" class="internal xref">Since draft-ietf-httpbis-resumable-upload-02</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.9">
                <p id="section-toc.1-1.16.2.9.1"><a href="#appendix-A.9" class="auto internal xref"></a><a href="#name-since-draft-ietf-httpbis-resumable-" class="internal xref">Since draft-ietf-httpbis-resumable-upload-01</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.10">
                <p id="section-toc.1-1.16.2.10.1"><a href="#appendix-A.10" class="auto internal xref"></a><a href="#name-since-draft-ietf-httpbis-resumable--2" class="internal xref">Since draft-ietf-httpbis-resumable-upload-00</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.11">
                <p id="section-toc.1-1.16.2.11.1"><a href="#appendix-A.11" class="auto internal xref"></a><a href="#name-since-draft-tus-httpbis-res" class="internal xref">Since draft-tus-httpbis-resumable-uploads-protocol-02</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.12">
                <p id="section-toc.1-1.16.2.12.1"><a href="#appendix-A.12" class="auto internal xref"></a><a href="#name-since-draft-tus-httpbis-resu" class="internal xref">Since draft-tus-httpbis-resumable-uploads-protocol-01</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.13">
                <p id="section-toc.1-1.16.2.13.1"><a href="#appendix-A.13" class="auto internal xref"></a><a href="#name-since-draft-tus-httpbis-resum" class="internal xref">Since draft-tus-httpbis-resumable-uploads-protocol-00</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-draft-version-identificatio" class="internal xref">Draft Version Identification</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#appendix-D" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Data transfer using the Hypertext Transfer Protocol (<span>[<a href="#HTTP" class="cite xref">HTTP</a>]</span>) is often interrupted by canceled requests or dropped connections. If the intended recipient can indicate how much of the data was received prior to interruption, a sender can resume data transfer at that point instead of attempting to transfer all of the data again. HTTP range requests (see <span><a href="https://rfc-editor.org/rfc/rfc9110#section-14" class="relref">Section 14</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>) support this concept of resumable data transfers for downloads from server to client.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">This specification defines a mechanism for resumable uploads from client to server in a way that is backwards-compatible with conventional HTTP uploads. When an upload is interrupted, clients can send subsequent requests to query the server state and use this information to send the remaining representation data. Alternatively, they can cancel the upload entirely. Unlike ranged downloads, this protocol does not support transferring an upload as multiple requests in parallel.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">Utilizing resumable uploads, applications can recover from unintended interruptions, but also interrupt an upload on purpose to later resume it, for example, when a user wants to pause an upload, the device's network connectivity changes, or bandwidth should be saved for higher priority tasks.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">The document introduces the concept of an upload resource to facilitate resumable uploads (<a href="#upload-resource" class="auto internal xref">Section 4</a>) and defines new header fields to communicate the state of the upload (<a href="#state" class="auto internal xref">Section 4.1</a>), the status code <code>104 (Upload Resumption Supported)</code> to indicate the server's support for resumable uploads (<a href="#status-code-104" class="auto internal xref">Section 5</a>), and the <code>application/partial-upload</code> media type to label partial representation data when resuming an upload (<a href="#media-type-partial-upload" class="auto internal xref">Section 6</a>).<a href="#section-1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conventions-and-definitions">
<section id="section-2">
      <h2 id="name-conventions-and-definitions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-and-definitions" class="section-name selfRef">Conventions and Definitions</a>
      </h2>
<p id="section-2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">Some examples in this document contain long lines that may be folded, as described in <span>[<a href="#RFC8792" class="cite xref">RFC8792</a>]</span>.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">The terms Structured Header, Item, Dictionary, String, Integer, and Boolean are imported from <span>[<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span>.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">The terms "representation", "representation data", "representation metadata", "content", "client" and "server" are from <span><a href="https://rfc-editor.org/rfc/rfc9110#section-3" class="relref">Section 3</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">The term "URI" is used as defined in <span><a href="https://rfc-editor.org/rfc/rfc9110#section-4" class="relref">Section 4</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">The term "patch document" is taken from <span>[<a href="#PATCH" class="cite xref">PATCH</a>]</span>.<a href="#section-2-6" class="pilcrow">¶</a></p>
<p id="section-2-7">An <em>upload resource</em> is a temporary resource on the server that facilitates the resumable upload of one representation (<a href="#upload-resource" class="auto internal xref">Section 4</a>).<a href="#section-2-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="overview">
<section id="section-3">
      <h2 id="name-overview">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-overview" class="section-name selfRef">Overview</a>
      </h2>
<p id="section-3-1">Resumable uploads are supported in HTTP through use of a temporary resource, an <em>upload resource</em> (<a href="#upload-resource" class="auto internal xref">Section 4</a>), that is separate from the resource being uploaded to and specific to that upload. By interacting with the upload resource, a client can retrieve the current offset of the upload (<a href="#offset-retrieving" class="auto internal xref">Section 4.3</a>), append to the upload (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>), and cancel the upload (<a href="#upload-cancellation" class="auto internal xref">Section 4.5</a>).<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">The remainder of this section uses examples to illustrate different interactions with the upload resource. HTTP message exchanges, and thereby resumable uploads, use representation data (see <span><a href="https://rfc-editor.org/rfc/rfc9110#section-8.1" class="relref">Section 8.1</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>). This means that resumable uploads can be used with many forms of content, such as static files, in-memory buffers, data from streaming sources, or on-demand generated data.<a href="#section-3-2" class="pilcrow">¶</a></p>
<div id="example-1">
<section id="section-3.1">
        <h3 id="name-example-1-complete-upload-o">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-example-1-complete-upload-o" class="section-name selfRef">Example 1: Complete upload of representation data with known size</a>
        </h3>
<p id="section-3.1-1">In this example, the client first attempts to upload representation data with a known size in a single HTTP request to the resource at <code>/project/123/files</code>. An interruption occurs and the client then attempts to resume the upload using subsequent HTTP requests to the upload resource at <code>/uploads/abc</code>.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">1) The client notifies the server that it wants to begin an upload (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>). The server reserves the required resources to accept the upload from the client, and the client begins transferring the entire representation data in the request content.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3">An interim response can be sent to the client, which signals the server's support of resumable upload as well as the upload resource's URI via the Location header field (<span><a href="https://rfc-editor.org/rfc/rfc9110#section-10.2.2" class="relref">Section 10.2.2</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>).<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<span id="name-upload-creation"></span><div id="fig-upload-creation">
<figure id="figure-1">
          <div id="section-3.1-4.1">
            <div class="alignLeft art-svg artwork" id="section-3.1-4.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="304" width="520" viewBox="0 0 520 304" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
                <path d="M 8,48 L 8,272" fill="none" stroke="black"></path>
                <path d="M 368,48 L 368,272" fill="none" stroke="black"></path>
                <path d="M 512,160 L 512,192" fill="none" stroke="black"></path>
                <path d="M 16,96 L 360,96" fill="none" stroke="black"></path>
                <path d="M 376,160 L 512,160" fill="none" stroke="black"></path>
                <path d="M 376,192 L 512,192" fill="none" stroke="black"></path>
                <path d="M 16,256 L 360,256" fill="none" stroke="black"></path>
                <path d="M 16,288 L 120,288" fill="none" stroke="black"></path>
                <path d="M 256,288 L 360,288" fill="none" stroke="black"></path>
                <polygon class="arrowhead" points="384,192 372,186.4 372,197.6" fill="black" transform="rotate(180,376,192)"></polygon>
                <polygon class="arrowhead" points="368,96 356,90.4 356,101.6" fill="black" transform="rotate(0,360,96)"></polygon>
                <polygon class="arrowhead" points="24,256 12,250.4 12,261.6" fill="black" transform="rotate(180,16,256)"></polygon>
                <g class="text">
                  <text x="28" y="36">Client</text>
                  <text x="348" y="36">Server</text>
                  <text x="36" y="68">POST</text>
                  <text x="132" y="68">/project/123/files</text>
                  <text x="84" y="84">Upload-Complete:</text>
                  <text x="164" y="84">?1</text>
                  <text x="408" y="132">Reserve</text>
                  <text x="480" y="132">resources</text>
                  <text x="392" y="148">for</text>
                  <text x="436" y="148">upload</text>
                  <text x="120" y="228">104</text>
                  <text x="164" y="228">Upload</text>
                  <text x="236" y="228">Resumption</text>
                  <text x="320" y="228">Supported</text>
                  <text x="144" y="244">Location:</text>
                  <text x="236" y="244">/uploads/abc</text>
                  <text x="8" y="292">X</text>
                  <text x="140" y="292">Flow</text>
                  <text x="208" y="292">Interrupted</text>
                  <text x="368" y="292">X</text>
                </g>
              </svg><a href="#section-3.1-4.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-upload-creation" class="selfRef">Upload Creation</a>
          </figcaption></figure>
</div>
<p id="section-3.1-5">2) If the connection to the server is interrupted, the client might want to resume the upload. However, before this is possible the client needs to know the amount of representation data that the server received before the interruption. It does so by retrieving the offset (<a href="#offset-retrieving" class="auto internal xref">Section 4.3</a>) from the upload resource.<a href="#section-3.1-5" class="pilcrow">¶</a></p>
<span id="name-offset-retrieval"></span><div id="fig-offset-retrieving">
<figure id="figure-2">
          <div id="section-3.1-6.1">
            <div class="alignLeft art-svg artwork" id="section-3.1-6.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="176" width="416" viewBox="0 0 416 176" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
                <path d="M 8,48 L 8,160" fill="none" stroke="black"></path>
                <path d="M 408,48 L 408,160" fill="none" stroke="black"></path>
                <path d="M 16,80 L 400,80" fill="none" stroke="black"></path>
                <path d="M 16,144 L 400,144" fill="none" stroke="black"></path>
                <polygon class="arrowhead" points="408,80 396,74.4 396,85.6" fill="black" transform="rotate(0,400,80)"></polygon>
                <polygon class="arrowhead" points="24,144 12,138.4 12,149.6" fill="black" transform="rotate(180,16,144)"></polygon>
                <g class="text">
                  <text x="28" y="36">Client</text>
                  <text x="388" y="36">Server</text>
                  <text x="36" y="68">HEAD</text>
                  <text x="108" y="68">/uploads/abc</text>
                  <text x="280" y="116">204</text>
                  <text x="308" y="116">No</text>
                  <text x="352" y="116">Content</text>
                  <text x="324" y="132">Upload-Offset:</text>
                  <text x="392" y="132">X</text>
                </g>
              </svg><a href="#section-3.1-6.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-offset-retrieval" class="selfRef">Offset Retrieval</a>
          </figcaption></figure>
</div>
<p id="section-3.1-7">3) The client can resume the upload by sending the remaining representation data to the upload resource (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>), appending to the already stored representation data in the upload using the <code>application/partial-upload</code> media type. The <code>Upload-Offset</code> value is included to ensure that the client and server agree on the offset that the upload resumes from. Once the remaining representation data is transferred, the server processes the entire representation and responds with whatever the initial request to <code>/project/123/files</code> would have produced if it had not been interrupted, e.g. a <code>200 (OK)</code> response.<a href="#section-3.1-7" class="pilcrow">¶</a></p>
<span id="name-upload-append"></span><div id="fig-upload-appending">
<figure id="figure-3">
          <div id="section-3.1-8.1">
            <div class="alignLeft art-svg artwork" id="section-3.1-8.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="208" width="416" viewBox="0 0 416 208" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
                <path d="M 8,48 L 8,192" fill="none" stroke="black"></path>
                <path d="M 408,48 L 408,192" fill="none" stroke="black"></path>
                <path d="M 16,128 L 400,128" fill="none" stroke="black"></path>
                <path d="M 16,176 L 400,176" fill="none" stroke="black"></path>
                <polygon class="arrowhead" points="408,128 396,122.4 396,133.6" fill="black" transform="rotate(0,400,128)"></polygon>
                <polygon class="arrowhead" points="24,176 12,170.4 12,181.6" fill="black" transform="rotate(180,16,176)"></polygon>
                <g class="text">
                  <text x="28" y="36">Client</text>
                  <text x="388" y="36">Server</text>
                  <text x="40" y="68">PATCH</text>
                  <text x="116" y="68">/uploads/abc</text>
                  <text x="84" y="84">Upload-Complete:</text>
                  <text x="164" y="84">?1</text>
                  <text x="76" y="100">Upload-Offset:</text>
                  <text x="144" y="100">X</text>
                  <text x="72" y="116">Content-Type:</text>
                  <text x="236" y="116">application/partial-upload</text>
                  <text x="360" y="164">200</text>
                  <text x="388" y="164">OK</text>
                </g>
              </svg><a href="#section-3.1-8.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-upload-append" class="selfRef">Upload Append</a>
          </figcaption></figure>
</div>
<p id="section-3.1-9">4) If the client is not interested in completing the upload, it can instruct the upload resource to delete the upload and free all related resources (<a href="#upload-cancellation" class="auto internal xref">Section 4.5</a>).<a href="#section-3.1-9" class="pilcrow">¶</a></p>
<span id="name-upload-cancellation"></span><div id="fig-upload-cancellation">
<figure id="figure-4">
          <div id="section-3.1-10.1">
            <div class="alignLeft art-svg artwork" id="section-3.1-10.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="160" width="416" viewBox="0 0 416 160" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
                <path d="M 8,48 L 8,144" fill="none" stroke="black"></path>
                <path d="M 408,48 L 408,144" fill="none" stroke="black"></path>
                <path d="M 16,80 L 400,80" fill="none" stroke="black"></path>
                <path d="M 16,128 L 400,128" fill="none" stroke="black"></path>
                <polygon class="arrowhead" points="408,80 396,74.4 396,85.6" fill="black" transform="rotate(0,400,80)"></polygon>
                <polygon class="arrowhead" points="24,128 12,122.4 12,133.6" fill="black" transform="rotate(180,16,128)"></polygon>
                <g class="text">
                  <text x="28" y="36">Client</text>
                  <text x="388" y="36">Server</text>
                  <text x="44" y="68">DELETE</text>
                  <text x="124" y="68">/uploads/abc</text>
                  <text x="296" y="116">204</text>
                  <text x="324" y="116">No</text>
                  <text x="368" y="116">Content</text>
                </g>
              </svg><a href="#section-3.1-10.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-upload-cancellation" class="selfRef">Upload Cancellation</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="example-2">
<section id="section-3.2">
        <h3 id="name-example-2-upload-as-a-serie">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-example-2-upload-as-a-serie" class="section-name selfRef">Example 2: Upload as a series of parts</a>
        </h3>
<p id="section-3.2-1">In some cases, clients might prefer to upload a representation as a series of parts sent serially across multiple HTTP messages. One use case is to overcome server limits on HTTP message content size. Another use case is where the client does not know the final size of the representation data, such as when the data originates from a streaming source.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">This example shows how the client, with prior knowledge about the server's resumable upload support, can upload parts of a representation incrementally.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">1) If the client is aware that the server supports resumable upload, it can start an upload with the <code>Upload-Complete</code> field value set to false and the first part of the representation.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<span id="name-upload-creation-with-partia"></span><div id="fig-upload-creation-incomplete">
<figure id="figure-5">
          <div id="section-3.2-4.1">
            <div class="alignLeft art-svg artwork" id="section-3.2-4.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="192" width="416" viewBox="0 0 416 192" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
                <path d="M 8,48 L 8,176" fill="none" stroke="black"></path>
                <path d="M 408,48 L 408,176" fill="none" stroke="black"></path>
                <path d="M 16,96 L 400,96" fill="none" stroke="black"></path>
                <path d="M 16,160 L 400,160" fill="none" stroke="black"></path>
                <polygon class="arrowhead" points="408,96 396,90.4 396,101.6" fill="black" transform="rotate(0,400,96)"></polygon>
                <polygon class="arrowhead" points="24,160 12,154.4 12,165.6" fill="black" transform="rotate(180,16,160)"></polygon>
                <g class="text">
                  <text x="28" y="36">Client</text>
                  <text x="388" y="36">Server</text>
                  <text x="36" y="68">POST</text>
                  <text x="132" y="68">/project/123/files</text>
                  <text x="84" y="84">Upload-Complete:</text>
                  <text x="164" y="84">?0</text>
                  <text x="320" y="132">201</text>
                  <text x="368" y="132">Created</text>
                  <text x="256" y="148">Location:</text>
                  <text x="348" y="148">/uploads/abc</text>
                </g>
              </svg><a href="#section-3.2-4.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-upload-creation-with-partia" class="selfRef">Upload creation with partial representation data</a>
          </figcaption></figure>
</div>
<p id="section-3.2-5">2) Subsequent, intermediate parts are appended (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) with the <code>Upload-Complete</code> field value set to false, indicating that they are not the last part of the representation data. The offset value in the <code>Upload-Offset</code> header field is taken from the previous response when creating the upload or appending to it.<a href="#section-3.2-5" class="pilcrow">¶</a></p>
<span id="name-appending-partial-represent"></span><div id="fig-upload-appending-incomplete">
<figure id="figure-6">
          <div id="section-3.2-6.1">
            <div class="alignLeft art-svg artwork" id="section-3.2-6.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="208" width="416" viewBox="0 0 416 208" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
                <path d="M 8,48 L 8,192" fill="none" stroke="black"></path>
                <path d="M 408,48 L 408,192" fill="none" stroke="black"></path>
                <path d="M 16,128 L 400,128" fill="none" stroke="black"></path>
                <path d="M 16,176 L 400,176" fill="none" stroke="black"></path>
                <polygon class="arrowhead" points="408,128 396,122.4 396,133.6" fill="black" transform="rotate(0,400,128)"></polygon>
                <polygon class="arrowhead" points="24,176 12,170.4 12,181.6" fill="black" transform="rotate(180,16,176)"></polygon>
                <g class="text">
                  <text x="28" y="36">Client</text>
                  <text x="388" y="36">Server</text>
                  <text x="40" y="68">PATCH</text>
                  <text x="116" y="68">/uploads/abc</text>
                  <text x="84" y="84">Upload-Complete:</text>
                  <text x="164" y="84">?0</text>
                  <text x="76" y="100">Upload-Offset:</text>
                  <text x="144" y="100">X</text>
                  <text x="72" y="116">Content-Type:</text>
                  <text x="236" y="116">application/partial-upload</text>
                  <text x="296" y="164">204</text>
                  <text x="324" y="164">No</text>
                  <text x="368" y="164">Content</text>
                </g>
              </svg><a href="#section-3.2-6.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-appending-partial-represent" class="selfRef">Appending partial representation data to upload</a>
          </figcaption></figure>
</div>
<p id="section-3.2-7">3) If the connection was interrupted, the client might want to resume the upload, similar to the previous example (<a href="#example-1" class="auto internal xref">Section 3.1</a>). The client retrieves the offset (<a href="#offset-retrieving" class="auto internal xref">Section 4.3</a>) to learn the amount of representation data received by the server and then continues appending the remaining parts to the upload as in the previous step.<a href="#section-3.2-7" class="pilcrow">¶</a></p>
<span id="name-resuming-an-interrupted-upl"></span><div id="fig-upload-resume-incomplete">
<figure id="figure-7">
          <div id="section-3.2-8.1">
            <div class="alignLeft art-svg artwork" id="section-3.2-8.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="320" width="416" viewBox="0 0 416 320" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
                <path d="M 8,48 L 8,304" fill="none" stroke="black"></path>
                <path d="M 408,48 L 408,304" fill="none" stroke="black"></path>
                <path d="M 16,80 L 400,80" fill="none" stroke="black"></path>
                <path d="M 16,144 L 400,144" fill="none" stroke="black"></path>
                <path d="M 16,240 L 400,240" fill="none" stroke="black"></path>
                <path d="M 16,288 L 400,288" fill="none" stroke="black"></path>
                <polygon class="arrowhead" points="408,240 396,234.4 396,245.6" fill="black" transform="rotate(0,400,240)"></polygon>
                <polygon class="arrowhead" points="408,80 396,74.4 396,85.6" fill="black" transform="rotate(0,400,80)"></polygon>
                <polygon class="arrowhead" points="24,288 12,282.4 12,293.6" fill="black" transform="rotate(180,16,288)"></polygon>
                <polygon class="arrowhead" points="24,144 12,138.4 12,149.6" fill="black" transform="rotate(180,16,144)"></polygon>
                <g class="text">
                  <text x="28" y="36">Client</text>
                  <text x="388" y="36">Server</text>
                  <text x="36" y="68">HEAD</text>
                  <text x="108" y="68">/uploads/abc</text>
                  <text x="296" y="116">204</text>
                  <text x="324" y="116">No</text>
                  <text x="368" y="116">Content</text>
                  <text x="324" y="132">Upload-Offset:</text>
                  <text x="392" y="132">Y</text>
                  <text x="40" y="180">PATCH</text>
                  <text x="116" y="180">/uploads/abc</text>
                  <text x="84" y="196">Upload-Complete:</text>
                  <text x="164" y="196">?0</text>
                  <text x="76" y="212">Upload-Offset:</text>
                  <text x="144" y="212">Y</text>
                  <text x="72" y="228">Content-Type:</text>
                  <text x="236" y="228">application/partial-upload</text>
                  <text x="296" y="276">204</text>
                  <text x="324" y="276">No</text>
                  <text x="368" y="276">Content</text>
                </g>
              </svg><a href="#section-3.2-8.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-resuming-an-interrupted-upl" class="selfRef">Resuming an interrupted upload</a>
          </figcaption></figure>
</div>
<p id="section-3.2-9">4) The request to append the last part of the representation data has a <code>Upload-Complete</code> field value set to true to indicate the complete transfer. Once the remaining representation data is transferred, the server processes the entire representation and responds with whatever the initial request to <code>/project/123/files</code> would have produced if it had received the entire representation, e.g. a <code>200 (OK)</code> response.<a href="#section-3.2-9" class="pilcrow">¶</a></p>
<span id="name-appending-remaining-represe"></span><div id="fig-upload-appending-last-chunk">
<figure id="figure-8">
          <div id="section-3.2-10.1">
            <div class="alignLeft art-svg artwork" id="section-3.2-10.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="208" width="416" viewBox="0 0 416 208" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
                <path d="M 8,48 L 8,192" fill="none" stroke="black"></path>
                <path d="M 408,48 L 408,192" fill="none" stroke="black"></path>
                <path d="M 16,128 L 400,128" fill="none" stroke="black"></path>
                <path d="M 16,176 L 400,176" fill="none" stroke="black"></path>
                <polygon class="arrowhead" points="408,128 396,122.4 396,133.6" fill="black" transform="rotate(0,400,128)"></polygon>
                <polygon class="arrowhead" points="24,176 12,170.4 12,181.6" fill="black" transform="rotate(180,16,176)"></polygon>
                <g class="text">
                  <text x="28" y="36">Client</text>
                  <text x="388" y="36">Server</text>
                  <text x="40" y="68">PATCH</text>
                  <text x="116" y="68">/uploads/abc</text>
                  <text x="76" y="84">Upload-Offset:</text>
                  <text x="144" y="84">Z</text>
                  <text x="84" y="100">Upload-Complete:</text>
                  <text x="164" y="100">?1</text>
                  <text x="72" y="116">Content-Type:</text>
                  <text x="236" y="116">application/partial-upload</text>
                  <text x="360" y="164">200</text>
                  <text x="388" y="164">OK</text>
                </g>
              </svg><a href="#section-3.2-10.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-appending-remaining-represe" class="selfRef">Appending remaining representation data</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="upload-resource">
<section id="section-4">
      <h2 id="name-upload-resource">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-upload-resource" class="section-name selfRef">Upload Resource</a>
      </h2>
<p id="section-4-1">A resumable upload is enabled through interaction with an upload resource. When a resumable upload begins, the server is asked to create an upload resource through a request to another resource (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>). This upload resource is responsible for handling the upload of a representation. Using the upload resource, the client can query the upload progress (<a href="#offset-retrieving" class="auto internal xref">Section 4.3</a>), append representation data (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>), or cancel the upload (<a href="#upload-cancellation" class="auto internal xref">Section 4.5</a>).<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">An upload resource is specific to the upload of one representation. For uploading multiple representations, multiple upload resources have to be used.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">The server can clean up an upload resource and make it inaccessible immediately after the upload is complete. However, if a client didn't receive the last response acknowledging the upload's completion and the upload resource is not available anymore, the client cannot verify the upload's state with the server. Therefore, the server <span class="bcp14">SHOULD</span> keep the upload resource available for a reasonable amount of time after the upload is complete.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">An upload resource <span class="bcp14">SHOULD NOT</span> reuse the URI from a previous upload resource, unless reasonable time has passed to ensure that no client will attempt to access the previous upload resource. Otherwise, a client might access the upload resource corresponding to a different representation than it intends to transfer.<a href="#section-4-4" class="pilcrow">¶</a></p>
<div id="state">
<section id="section-4.1">
        <h3 id="name-state">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-state" class="section-name selfRef">State</a>
        </h3>
<p id="section-4.1-1">The state of an upload consists of the following properties that are tracked by the upload resource.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<div id="upload-offset">
<section id="section-4.1.1">
          <h4 id="name-offset">
<a href="#section-4.1.1" class="section-number selfRef">4.1.1. </a><a href="#name-offset" class="section-name selfRef">Offset</a>
          </h4>
<p id="section-4.1.1-1">The offset is the number of bytes from the representation data that have been received, either during the creation of the upload resource (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>) and by appending to it (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>). The offset can be retrieved from the upload resource (<a href="#offset-retrieving" class="auto internal xref">Section 4.3</a>) and is required when appending representation data (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) to synchronize the client and resource regarding the amount of transferred representation data.<a href="#section-4.1.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1.1-2">Representation data received by the upload resource cannot be removed again and, therefore, the offset <span class="bcp14">MUST NOT</span> decrease. If the upload resource loses representation data, the server <span class="bcp14">MUST</span> consider the upload resource invalid and reject further interaction with it.<a href="#section-4.1.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1.1-3">The <code>Upload-Offset</code> request and response header field conveys the offset. <code>Upload-Offset</code> is an Item Structured Header Field (<span>[<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span>). Its value is a non-negative Integer (<span><a href="https://rfc-editor.org/rfc/rfc9651#section-3.3.1" class="relref">Section 3.3.1</a> of [<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span>) and indicates the current offset as viewed by the message sender. Other values <span class="bcp14">MUST</span> cause the entire header field to be ignored.<a href="#section-4.1.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1.1-4">The <code>Upload-Offset</code> header field in responses serves as an acknowledgement of the received representation data and as a guarantee that no retransmission of it will be necessary. Clients can use this guarantee to free resources associated to transferred representation data.<a href="#section-4.1.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="upload-complete">
<section id="section-4.1.2">
          <h4 id="name-completeness">
<a href="#section-4.1.2" class="section-number selfRef">4.1.2. </a><a href="#name-completeness" class="section-name selfRef">Completeness</a>
          </h4>
<p id="section-4.1.2-1">An upload is incomplete until it is explicitly marked as completed by the client. After this point, no representation data can be appended anymore.<a href="#section-4.1.2-1" class="pilcrow">¶</a></p>
<p id="section-4.1.2-2">The <code>Upload-Complete</code> request and response header field conveys the completeness state. <code>Upload-Complete</code> is an Item Structured Header Field (<span>[<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span>). Its value is a Boolean (<span><a href="https://rfc-editor.org/rfc/rfc9651#section-3.3.6" class="relref">Section 3.3.6</a> of [<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span>) and indicates whether the upload is complete or not. Other values <span class="bcp14">MUST</span> cause the entire header field to be ignored.<a href="#section-4.1.2-2" class="pilcrow">¶</a></p>
<p id="section-4.1.2-3">An upload is marked as completed if a request for creating the upload resource (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>) or appending to it (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) included the <code>Upload-Complete</code> header field with a true value and the request content was fully received.<a href="#section-4.1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="upload-length">
<section id="section-4.1.3">
          <h4 id="name-length">
<a href="#section-4.1.3" class="section-number selfRef">4.1.3. </a><a href="#name-length" class="section-name selfRef">Length</a>
          </h4>
<p id="section-4.1.3-1">The length of an upload is the number of bytes of representation data that the client intends to upload.<a href="#section-4.1.3-1" class="pilcrow">¶</a></p>
<p id="section-4.1.3-2">Even the client might not know the total length of the representation data when starting the transfer, for example, because the representation is taken from a streaming source. However, a client <span class="bcp14">SHOULD</span> communicate the length to the upload resource as soon as it becomes known. There are two different ways for the client to indicate and the upload resource to discover the length from requests for creating the upload resource (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>) or appending to it (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>):<a href="#section-4.1.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.3-3.1">
              <p id="section-4.1.3-3.1.1">If the request includes the <code>Upload-Complete</code> field value set to true and a valid <code>Content-Length</code> header field, the request content is the remaining representation data. The length is then the sum of the current offset (<a href="#upload-offset" class="auto internal xref">Section 4.1.1</a>) and the <code>Content-Length</code> header field value.<a href="#section-4.1.3-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.1.3-3.2">
              <p id="section-4.1.3-3.2.1">The request can include the <code>Upload-Length</code> request and response header field. <code>Upload-Length</code> is an Item Structured Header Field (<span>[<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span>). Its value is a non-negative Integer (<span><a href="https://rfc-editor.org/rfc/rfc9651#section-3.3.1" class="relref">Section 3.3.1</a> of [<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span>) and indicates the number of bytes of the entire representation data. Other values <span class="bcp14">MUST</span> cause the entire header field to be ignored.<a href="#section-4.1.3-3.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-4.1.3-4">If both indicators are present in the same request, their indicated lengths <span class="bcp14">MUST</span> match. If multiple requests include indicators, their indicated values <span class="bcp14">MUST</span> match. A server can use the problem type <span>[<a href="#PROBLEM" class="cite xref">PROBLEM</a>]</span> of "https://iana.org/assignments/http-problem-types#inconsistent-upload-length" (<a href="#inconsistent-length" class="auto internal xref">Section 7.3</a>) in responses to indicate inconsistent length values.<a href="#section-4.1.3-4" class="pilcrow">¶</a></p>
<p id="section-4.1.3-5">The upload resource might not know the length until the upload is complete.<a href="#section-4.1.3-5" class="pilcrow">¶</a></p>
<p id="section-4.1.3-6">Note that the length and offset values do not determine whether an upload is complete. Instead, the client uses the <code>Upload-Complete</code> (<a href="#upload-complete" class="auto internal xref">Section 4.1.2</a>) header field to indicate that a request completes the upload. The offset could match the length, but the upload can still be incomplete.<a href="#section-4.1.3-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="upload-limit">
<section id="section-4.1.4">
          <h4 id="name-limits">
<a href="#section-4.1.4" class="section-number selfRef">4.1.4. </a><a href="#name-limits" class="section-name selfRef">Limits</a>
          </h4>
<p id="section-4.1.4-1">An upload resource <span class="bcp14">MAY</span> enforce one or multiple limits, which are communicated to the client via the <code>Upload-Limit</code> response header field. <code>Upload-Limit</code> is a Dictionary Structured Header Field (<span>[<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span>). Its value is a Dictionary (<span><a href="https://rfc-editor.org/rfc/rfc9651#section-3.2" class="relref">Section 3.2</a> of [<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span>). Other values <span class="bcp14">MUST</span> cause the entire header field to be ignored.<a href="#section-4.1.4-1" class="pilcrow">¶</a></p>
<p id="section-4.1.4-2">The following key-value pairs are defined:<a href="#section-4.1.4-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.4-3.1">
              <p id="section-4.1.4-3.1.1">The value under the <code>max-size</code> key specifies a maximum size for the representation data, counted in bytes. The server might not create an upload resource if the length (<a href="#upload-length" class="auto internal xref">Section 4.1.3</a>) deduced from the upload creation request is larger than the maximum size. The upload resource can stop the upload if the offset (<a href="#upload-offset" class="auto internal xref">Section 4.1.1</a>) exceeds the maximum size. The value is an Integer.<a href="#section-4.1.4-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.1.4-3.2">
              <p id="section-4.1.4-3.2.1">The value under the <code>min-size</code> key specifies a minimum size for the representation data, counted in bytes. The server might not create an upload resource if the length (<a href="#upload-length" class="auto internal xref">Section 4.1.3</a>) deduced from the upload creation request is smaller than the minimum size or no length can be deduced at all. The value is an Integer.<a href="#section-4.1.4-3.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.1.4-3.3">
              <p id="section-4.1.4-3.3.1">The value under the <code>max-append-size</code> key specifies a maximum size counted in bytes for the request content in a single upload append request (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>). The server might reject requests exceeding this limit. A client that is aware of this limit <span class="bcp14">MUST NOT</span> send larger upload append requests. The value is an Integer.<a href="#section-4.1.4-3.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.1.4-3.4">
              <p id="section-4.1.4-3.4.1">The value under the <code>min-append-size</code> key specifies a minimum size counted in bytes for the request content in a single upload append request (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>). The server might reject requests below this limit. A client that is aware of this limit <span class="bcp14">MUST NOT</span> send smaller upload append requests. The value is an Integer. Requests completing the upload by including the <code>Upload-Complete: ?1</code> header field are exempt from this limit.<a href="#section-4.1.4-3.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.1.4-3.5">
              <p id="section-4.1.4-3.5.1">The value under the <code>max-age</code> key specifies the remaining lifetime of the upload resource in seconds counted from the generation of the response. After the resource's lifetime is reached, the server might make the upload resource inaccessible and a client <span class="bcp14">SHOULD NOT</span> attempt to access the upload resource as these requests will likely fail. The lifetime <span class="bcp14">MAY</span> be extended but <span class="bcp14">SHOULD NOT</span> be reduced unless the server makes the upload resource immediately inaccessible. The value is an Integer.<a href="#section-4.1.4-3.5.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-4.1.4-4">Except for the <code>max-age</code> limit, the existence of a limit or its value <span class="bcp14">MUST NOT</span> change throughout the lifetime of the upload resource.<a href="#section-4.1.4-4" class="pilcrow">¶</a></p>
<p id="section-4.1.4-5">When parsing the <code>Upload-Limit</code> header field, unrecognized keys <span class="bcp14">MUST</span> be ignored and <span class="bcp14">MUST NOT</span> fail the parsing to facilitate the addition of new limits in the future. Keys with values other than defined here <span class="bcp14">MUST</span> be ignored.<a href="#section-4.1.4-5" class="pilcrow">¶</a></p>
<p id="section-4.1.4-6">A server that supports the creation of a resumable upload resource (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>) for a target URI <span class="bcp14">MUST</span> include the <code>Upload-Limit</code> header field with the corresponding limits in a response to an <code>OPTIONS</code> request sent to this target URI. If a server supports the creation of upload resources for any target URI, it <span class="bcp14">SHOULD</span> include the <code>Upload-Limit</code> header field with the corresponding limits in a response to an <code>OPTIONS</code> request with the <code>*</code> target unless the server is not capable of handling <code>OPTIONS *</code> requests. If the server does not apply any limits, it <span class="bcp14">MUST</span> use <code>min-size=0</code> instead of an empty header value.<a href="#section-4.1.4-6" class="pilcrow">¶</a></p>
<p id="section-4.1.4-7">A client can use an <code>OPTIONS</code> request to discover support for resumable uploads and potential limits before creating an upload resource. To reduce the liklihood of failing requests, the limits announced in an <code>OPTIONS</code> response <span class="bcp14">SHOULD NOT</span> be less restrictive than the limits applied to an upload once the upload resource has been created, unless the request to create an upload resource included additional information that warrants different limits. For example, a server might announce a general maximum size limit of 1GB, but reduce it to 100MB when the media type indicates an image.<a href="#section-4.1.4-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="upload-creation">
<section id="section-4.2">
        <h3 id="name-upload-creation-2">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-upload-creation-2" class="section-name selfRef">Upload Creation</a>
        </h3>
<div id="client-behavior">
<section id="section-4.2.1">
          <h4 id="name-client-behavior">
<a href="#section-4.2.1" class="section-number selfRef">4.2.1. </a><a href="#name-client-behavior" class="section-name selfRef">Client Behavior</a>
          </h4>
<p id="section-4.2.1-1">A client can start a resumable upload from any request that can carry content by including the <code>Upload-Complete</code> header field (<a href="#upload-complete" class="auto internal xref">Section 4.1.2</a>). As a consequence, all request methods that allow content are possible, such as <code>POST</code>, <code>PUT</code>, and <code>PATCH</code>.<a href="#section-4.2.1-1" class="pilcrow">¶</a></p>
<p id="section-4.2.1-2">The <code>Upload-Complete</code> header field is set to true if the request content includes the entire representation data that the client intends to upload. This is also a requirement for transparently upgrading to resumable uploads from traditional uploads (<a href="#upgrading-uploads" class="auto internal xref">Section 12.1.1</a>).<a href="#section-4.2.1-2" class="pilcrow">¶</a></p>
<p id="section-4.2.1-3">If the client knows the representation data's length, it <span class="bcp14">SHOULD</span> include the <code>Upload-Length</code> header field (<a href="#upload-length" class="auto internal xref">Section 4.1.3</a>) in the request to help the server allocate necessary resources for the upload and provide early feedback if the representation violates a limit (<a href="#upload-limit" class="auto internal xref">Section 4.1.4</a>).<a href="#section-4.2.1-3" class="pilcrow">¶</a></p>
<p id="section-4.2.1-4">The client <span class="bcp14">SHOULD</span> respect any limits (<a href="#upload-limit" class="auto internal xref">Section 4.1.4</a>) announced in the <code>Upload-Limit</code> header field in interim or final responses. In particular, if the allowed maximum size is less than the amount of representation data the client intends to upload, the client <span class="bcp14">SHOULD</span> stop the current request immediately and cancel the upload (<a href="#upload-cancellation" class="auto internal xref">Section 4.5</a>).<a href="#section-4.2.1-4" class="pilcrow">¶</a></p>
<p id="section-4.2.1-5">The request content can be empty. If the <code>Upload-Complete</code> header field is then set to true, the client intends to upload an empty representation. An <code>Upload-Complete</code> header field is set to false is also valid. This can be used to retrieve the upload resource's URI before transferring any representation data. Since interim responses are optional, this technique provides another mechanism to learn the URI, at the cost of an additional round-trip before data upload can commence.<a href="#section-4.2.1-5" class="pilcrow">¶</a></p>
<p id="section-4.2.1-6">Representation metadata included in the initial request (see <span><a href="https://rfc-editor.org/rfc/rfc9110#section-8.3" class="relref">Section 8.3</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>) can affect how servers act on the uploaded representation data. The <code>Content-Type</code> header field (<span><a href="https://rfc-editor.org/rfc/rfc9110#section-8.3" class="relref">Section 8.3</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>) indicates the media type of the representation. The <code>Content-Disposition</code> header field (<span>[<a href="#CONTENT-DISPOSITION" class="cite xref">CONTENT-DISPOSITION</a>]</span>) can be used to transmit a filename. The <code>Content-Encoding</code> header field (<span><a href="https://rfc-editor.org/rfc/rfc9110#section-8.4" class="relref">Section 8.4</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>) names the content codings applied to the representation.<a href="#section-4.2.1-6" class="pilcrow">¶</a></p>
<p id="section-4.2.1-7">If the client received a final response with a<a href="#section-4.2.1-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.1-8.1">
              <p id="section-4.2.1-8.1.1"><code>2xx (Successful)</code> status code and the entire representation data was transferred in the request content, the upload is complete and the response belongs to the targeted resource processing the representation.<a href="#section-4.2.1-8.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.2.1-8.2">
              <p id="section-4.2.1-8.2.1"><code>2xx (Successful)</code> status code and not the entire representation data was transferred in the request content, the <code>Location</code> response header field points the client to the created upload resource. The client can continue appending representation data to it (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>).<a href="#section-4.2.1-8.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.2.1-8.3">
              <p id="section-4.2.1-8.3.1"><code>4xx (Client Error)</code> status code, the client <span class="bcp14">SHOULD NOT</span> attempt to retry or resume the upload, unless the semantics of the response allow or recommend the client to retry the request.<a href="#section-4.2.1-8.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.2.1-8.4">
              <p id="section-4.2.1-8.4.1"><code>5xx (Server Error)</code> status code or no final response at all due to connectivity issues, the client <span class="bcp14">MAY</span> automatically attempt upload resumption by retrieving the current offset (<a href="#offset-retrieving" class="auto internal xref">Section 4.3</a>) if it received the URI of the upload resource in a <code>104 (Upload Resumption Supported)</code> interim response.<a href="#section-4.2.1-8.4.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
<div id="server-behavior">
<section id="section-4.2.2">
          <h4 id="name-server-behavior">
<a href="#section-4.2.2" class="section-number selfRef">4.2.2. </a><a href="#name-server-behavior" class="section-name selfRef">Server Behavior</a>
          </h4>
<p id="section-4.2.2-1">Upon receiving a request with the <code>Upload-Complete</code> header field, the server can choose to offer resumption support by creating an upload resource. If so, it <span class="bcp14">SHOULD</span> announce the upload resource by sending an interim response with the <code>104 (Upload Resumption Supported)</code> status code and the <code>Location</code> header field pointing to the upload resource unless the server is not capable of sending interim responses. The interim response <span class="bcp14">MUST</span> include the <code>Upload-Limit</code> header field with the corresponding limits (<a href="#upload-limit" class="auto internal xref">Section 4.1.4</a>) if existing. The interim response allows the client to resume the upload even if the message exchange gets later interrupted.<a href="#section-4.2.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2.2-2">The resource targeted by this initial request is responsible for processing the representation data transferred in the resumable upload according to the method and header fields in the initial request, while the upload resource enables resuming the transfer.<a href="#section-4.2.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2.2-3">If the <code>Upload-Complete</code> request header field is set to true, the client intends to transfer the entire representation data in one request. If the request content was fully received, no resumable upload is needed and the resource proceeds to process the request and generate a response.<a href="#section-4.2.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2.2-4">If the <code>Upload-Complete</code> header field is set to false, the client intends to transfer the representation over multiple requests. If the request content was fully received, the server <span class="bcp14">MUST</span> announce the upload resource by referencing it in the <code>Location</code> response header field. Servers are <span class="bcp14">RECOMMENDED</span> to use the <code>201 (Created)</code> status code. The response <span class="bcp14">MUST</span> include the <code>Upload-Limit</code> header field with the corresponding limits if existing.<a href="#section-4.2.2-4" class="pilcrow">¶</a></p>
<p id="section-4.2.2-5">The server <span class="bcp14">MUST</span> record the length according to <a href="#upload-length" class="auto internal xref">Section 4.1.3</a> if the necessary header fields are included in the request.<a href="#section-4.2.2-5" class="pilcrow">¶</a></p>
<p id="section-4.2.2-6">While the request content is being received, the server <span class="bcp14">MAY</span> send additional interim responses with a <code>104 (Upload Resumption Supported)</code> status code and the <code>Upload-Offset</code> header field set to the current offset to inform the client about the upload progress. These interim responses <span class="bcp14">MUST NOT</span> include the <code>Location</code> header field.<a href="#section-4.2.2-6" class="pilcrow">¶</a></p>
<p id="section-4.2.2-7">If the server does not receive the entire request content, for example because of canceled requests or dropped connections, it <span class="bcp14">SHOULD</span> append as much of the request content as possible to the upload resource. The upload resource <span class="bcp14">MUST NOT</span> be considered complete then.<a href="#section-4.2.2-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="upload-creation-example">
<section id="section-4.2.3">
          <h4 id="name-examples">
<a href="#section-4.2.3" class="section-number selfRef">4.2.3. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
          </h4>
<p id="section-4.2.3-1">A) The following example shows an upload creation, where the entire 100 bytes are transferred in the initial request. The server sends multiple interim responses and one final response from processing the uploaded representation.<a href="#section-4.2.3-1" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-4.2.3-2">
<pre>
POST /project/123/files HTTP/1.1
Host: example.com
Upload-Complete: ?1
Content-Length: 100
Upload-Length: 100

[content (100 bytes)]
</pre><a href="#section-4.2.3-2" class="pilcrow">¶</a>
</div>
<div class="lang-http-message sourcecode" id="section-4.2.3-3">
<pre>
HTTP/1.1 104 Upload Resumption Supported
Location: https://example.com/upload/b530ce8ff
Upload-Limit: max-size=1000000000

HTTP/1.1 104 Upload Resumption Supported
Upload-Offset: 50

HTTP/1.1 200 OK
Location: https://example.com/upload/b530ce8ff
Upload-Limit: max-size=1000000000
Content-Type: application/json

{"attachmentId": "b530ce8ff"}
</pre><a href="#section-4.2.3-3" class="pilcrow">¶</a>
</div>
<p id="section-4.2.3-4">B) The following example shows an upload creation, where only the first 25 bytes of a 100 bytes upload are transferred. The server acknowledges the received representation data and that the upload is not complete yet. The client can continue appending data.<a href="#section-4.2.3-4" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-4.2.3-5">
<pre>
POST /upload HTTP/1.1
Host: example.com
Upload-Complete: ?0
Content-Length: 25
Upload-Length: 100

[partial content (25 bytes)]
</pre><a href="#section-4.2.3-5" class="pilcrow">¶</a>
</div>
<div class="lang-http-message sourcecode" id="section-4.2.3-6">
<pre>
HTTP/1.1 104 Upload Resumption Supported
Location: https://example.com/upload/b530ce8ff

HTTP/1.1 201 Created
Location: https://example.com/upload/b530ce8ff
Upload-Limit: max-size=1000000000
</pre><a href="#section-4.2.3-6" class="pilcrow">¶</a>
</div>
<p id="section-4.2.3-7">C) The following example shows an upload creation, where the server responds with a 5xx status code. Thanks to the interim response containing the upload resource URI, the client can resume the upload.<a href="#section-4.2.3-7" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-4.2.3-8">
<pre>
POST /upload HTTP/1.1
Host: example.com
Upload-Complete: ?1
Content-Length: 100
Upload-Length: 100

[content (100 bytes)]
</pre><a href="#section-4.2.3-8" class="pilcrow">¶</a>
</div>
<div class="lang-http-message sourcecode" id="section-4.2.3-9">
<pre>
HTTP/1.1 104 Upload Resumption Supported
Location: https://example.com/upload/b530ce8ff

HTTP/1.1 500 Internal Server Error
</pre><a href="#section-4.2.3-9" class="pilcrow">¶</a>
</div>
<p id="section-4.2.3-10">D) The following example shows an upload creation being rejected by the server. The client cannot continue the upload.<a href="#section-4.2.3-10" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-4.2.3-11">
<pre>
POST /upload HTTP/1.1
Host: example.com
Upload-Complete: ?1
Content-Length: 100
Upload-Length: 100

[content (100 bytes)]
</pre><a href="#section-4.2.3-11" class="pilcrow">¶</a>
</div>
<div class="lang-http-message sourcecode" id="section-4.2.3-12">
<pre>
HTTP/1.1 400 Bad Request
</pre><a href="#section-4.2.3-12" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="offset-retrieving">
<section id="section-4.3">
        <h3 id="name-offset-retrieval-2">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-offset-retrieval-2" class="section-name selfRef">Offset Retrieval</a>
        </h3>
<div id="client-behavior-1">
<section id="section-4.3.1">
          <h4 id="name-client-behavior-2">
<a href="#section-4.3.1" class="section-number selfRef">4.3.1. </a><a href="#name-client-behavior-2" class="section-name selfRef">Client Behavior</a>
          </h4>
<p id="section-4.3.1-1">If the client wants to resume the upload after an interruption, it has to know the amount of representation data received by the upload resource so far. It can fetch the offset by sending a <code>HEAD</code> request to the upload resource. Upon a successful response, the client can continue the upload by appending representation data (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) starting at the offset indicated by the <code>Upload-Offset</code> response header field.<a href="#section-4.3.1-1" class="pilcrow">¶</a></p>
<p id="section-4.3.1-2">The offset can be less than or equal to the number of bytes of representation data that the client has already sent. The client <span class="bcp14">MAY</span> reject an offset which is greater than the number of bytes it has already sent during this upload. The client is expected to handle backtracking of a reasonable length. If the offset is invalid for this upload, or if the client cannot backtrack to the offset and reproduce the same representation data it has already sent, the upload <span class="bcp14">MUST</span> be considered a failure. The client <span class="bcp14">SHOULD</span> cancel the upload (<a href="#upload-cancellation" class="auto internal xref">Section 4.5</a>) after rejecting the offset.<a href="#section-4.3.1-2" class="pilcrow">¶</a></p>
<p id="section-4.3.1-3">The client <span class="bcp14">MUST NOT</span> perform offset retrieval while creation (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>) or appending (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) is in progress as this can cause the previous request to be terminated by the server as described in <a href="#concurrency" class="auto internal xref">Section 4.6</a>.<a href="#section-4.3.1-3" class="pilcrow">¶</a></p>
<p id="section-4.3.1-4">If the client received a response with a<a href="#section-4.3.1-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3.1-5.1">
              <p id="section-4.3.1-5.1.1"><code>2xx (Successful)</code> status code, the client can continue appending representation data to it (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) if the upload is not complete yet.<a href="#section-4.3.1-5.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.1-5.2">
              <p id="section-4.3.1-5.2.1"><code>307 (Temporary Redirect)</code> or <code>308 (Permanent Redirect)</code> status code, the client <span class="bcp14">MAY</span> retry retrieving the offset from the new URI.<a href="#section-4.3.1-5.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.1-5.3">
              <p id="section-4.3.1-5.3.1"><code>4xx (Client Error)</code> status code, the client <span class="bcp14">SHOULD NOT</span> attempt to retry or resume the upload, unless the semantics of the response allow or recommend the client to retry the request.<a href="#section-4.3.1-5.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.1-5.4">
              <p id="section-4.3.1-5.4.1"><code>5xx (Server Error)</code> status code or no final response at all due to connectivity issues, the client <span class="bcp14">MAY</span> retry retrieving the offset.<a href="#section-4.3.1-5.4.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
<div id="server-behavior-1">
<section id="section-4.3.2">
          <h4 id="name-server-behavior-2">
<a href="#section-4.3.2" class="section-number selfRef">4.3.2. </a><a href="#name-server-behavior-2" class="section-name selfRef">Server Behavior</a>
          </h4>
<p id="section-4.3.2-1">A successful response to a <code>HEAD</code> request against an upload resource<a href="#section-4.3.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3.2-2.1">
              <p id="section-4.3.2-2.1.1"><span class="bcp14">MUST</span> include the offset in the <code>Upload-Offset</code> header field (<a href="#upload-offset" class="auto internal xref">Section 4.1.1</a>),<a href="#section-4.3.2-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-2.2">
              <p id="section-4.3.2-2.2.1"><span class="bcp14">MUST</span> include the completeless state in the <code>Upload-Complete</code> header field (<a href="#upload-complete" class="auto internal xref">Section 4.1.2</a>),<a href="#section-4.3.2-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-2.3">
              <p id="section-4.3.2-2.3.1"><span class="bcp14">MUST</span> include the length in the <code>Upload-Length</code> header field if known (<a href="#upload-length" class="auto internal xref">Section 4.1.3</a>),<a href="#section-4.3.2-2.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-2.4">
              <p id="section-4.3.2-2.4.1"><span class="bcp14">MUST</span> indicate the limits in the <code>Upload-Limit</code> header field (<a href="#upload-limit" class="auto internal xref">Section 4.1.4</a>), and<a href="#section-4.3.2-2.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-2.5">
              <p id="section-4.3.2-2.5.1"><span class="bcp14">SHOULD</span> include the <code>Cache-Control</code> header field with the value <code>no-store</code> to prevent HTTP caching (<span>[<a href="#CACHING" class="cite xref">CACHING</a>]</span>).<a href="#section-4.3.2-2.5.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-4.3.2-3">The resource <span class="bcp14">SHOULD NOT</span> generate a response with the <code>301 (Moved Permanently)</code> and <code>302 (Found)</code> status codes because clients might follow the redirect without preserving the <code>HEAD</code> method.<a href="#section-4.3.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="offset-retrieving-example">
<section id="section-4.3.3">
          <h4 id="name-example">
<a href="#section-4.3.3" class="section-number selfRef">4.3.3. </a><a href="#name-example" class="section-name selfRef">Example</a>
          </h4>
<p id="section-4.3.3-1">A) The following example shows an offset retrieval request. The server indicates the current offset and that the upload is not complete yet. The client can continue to append representation data.<a href="#section-4.3.3-1" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-4.3.3-2">
<pre>
HEAD /upload/b530ce8ff HTTP/1.1
Host: example.com
</pre><a href="#section-4.3.3-2" class="pilcrow">¶</a>
</div>
<div class="lang-http-message sourcecode" id="section-4.3.3-3">
<pre>
HTTP/1.1 204 No Content
Upload-Offset: 100
Upload-Complete: ?0
Upload-Length: 500
Upload-Limit: max-age=3600
Cache-Control: no-store
</pre><a href="#section-4.3.3-3" class="pilcrow">¶</a>
</div>
<p id="section-4.3.3-4">B) The following example shows on offset retrieval request for a completed upload. The client does not need to continue the upload.<a href="#section-4.3.3-4" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-4.3.3-5">
<pre>
HEAD /upload/b530ce8ff HTTP/1.1
Host: example.com
</pre><a href="#section-4.3.3-5" class="pilcrow">¶</a>
</div>
<div class="lang-http-message sourcecode" id="section-4.3.3-6">
<pre>
HTTP/1.1 204 No Content
Upload-Offset: 500
Upload-Complete: ?1
Upload-Length: 500
Cache-Control: no-store
</pre><a href="#section-4.3.3-6" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="upload-appending">
<section id="section-4.4">
        <h3 id="name-upload-append-2">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-upload-append-2" class="section-name selfRef">Upload Append</a>
        </h3>
<div id="client-behavior-2">
<section id="section-4.4.1">
          <h4 id="name-client-behavior-3">
<a href="#section-4.4.1" class="section-number selfRef">4.4.1. </a><a href="#name-client-behavior-3" class="section-name selfRef">Client Behavior</a>
          </h4>
<p id="section-4.4.1-1">A client can continue the upload and append representation data by sending a <code>PATCH</code> request with the <code>application/partial-upload</code> media type (<a href="#media-type-partial-upload" class="auto internal xref">Section 6</a>) to the upload resource. The request content is the representation data to append.<a href="#section-4.4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.4.1-2">The client <span class="bcp14">MUST</span> indicate the offset of the request content inside the representation data by including the <code>Upload-Offset</code> request header field. To ensure that the upload resource will accept request, the offset <span class="bcp14">SHOULD</span> be taken from an immediate previous response for retrieving the offset (<a href="#offset-retrieving" class="auto internal xref">Section 4.3</a>) or appending representation data (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>).<a href="#section-4.4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.4.1-3">The request <span class="bcp14">MUST</span> include the <code>Upload-Complete</code> header field. Its value is true if the end of the request content is the end of the representation data. If the content is then fully received by the upload resource, the upload will be complete.<a href="#section-4.4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.4.1-4">The request content can be empty. If the <code>Upload-Complete</code> field is then set to true, the client wants to complete the upload without appending additional representation data.<a href="#section-4.4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.4.1-5">If the client received a final response with a<a href="#section-4.4.1-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.1-6.1">
              <p id="section-4.4.1-6.1.1"><code>2xx (Successful)</code> status code and the remaining representation data was transferred in the request content, the upload is complete and the corresponding response belongs to the resource processing the representation according to the initial request (see <a href="#upload-creation" class="auto internal xref">Section 4.2</a>).<a href="#section-4.4.1-6.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.4.1-6.2">
              <p id="section-4.4.1-6.2.1"><code>2xx (Successful)</code> status code and not the entire remaining representation data was transferred in the request content, the client can continue appending representation data.<a href="#section-4.4.1-6.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.4.1-6.3">
              <p id="section-4.4.1-6.3.1"><code>307 (Temporary Redirect)</code> or <code>308 (Permanent Redirect)</code> status code, the client <span class="bcp14">MAY</span> retry appending to the new URI.<a href="#section-4.4.1-6.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.4.1-6.4">
              <p id="section-4.4.1-6.4.1"><code>4xx (Client Error)</code> status code, the client <span class="bcp14">SHOULD NOT</span> attempt to retry or resume the upload, unless the semantics of the response allow or recommend the client to retry the request.<a href="#section-4.4.1-6.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.4.1-6.5">
              <p id="section-4.4.1-6.5.1"><code>5xx (Server Error)</code> status code or no final response at all due to connectivity issues, the client <span class="bcp14">MAY</span> automatically attempt upload resumption by retrieving the current offset (<a href="#offset-retrieving" class="auto internal xref">Section 4.3</a>).<a href="#section-4.4.1-6.5.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
<div id="server-behavior-2">
<section id="section-4.4.2">
          <h4 id="name-server-behavior-3">
<a href="#section-4.4.2" class="section-number selfRef">4.4.2. </a><a href="#name-server-behavior-3" class="section-name selfRef">Server Behavior</a>
          </h4>
<p id="section-4.4.2-1">An upload resource applies a <code>PATCH</code> request with the <code>application/partial-upload</code> media type (<a href="#media-type-partial-upload" class="auto internal xref">Section 6</a>) by appending the patch document in the request content to the upload resource.<a href="#section-4.4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.4.2-2">If the upload resource does not receive the entire patch document, for example because of canceled requests or dropped connections, it <span class="bcp14">SHOULD</span> append as much of the patch document as possible, starting at its beginning and without discontinuities. Appending a continuous section starting at the patch document's beginning constitutes a successful PATCH as defined in <span><a href="https://rfc-editor.org/rfc/rfc5789#section-2" class="relref">Section 2</a> of [<a href="#PATCH" class="cite xref">PATCH</a>]</span>.<a href="#section-4.4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.4.2-3">If the <code>Upload-Offset</code> request header field value does not match the current offset (<a href="#upload-offset" class="auto internal xref">Section 4.1.1</a>), the upload resource <span class="bcp14">MUST</span> reject the request with a <code>409 (Conflict)</code> status code. The response <span class="bcp14">MUST</span> include the correct offset in the <code>Upload-Offset</code> header field. The response can use the problem type <span>[<a href="#PROBLEM" class="cite xref">PROBLEM</a>]</span> of "https://iana.org/assignments/http-problem-types#mismatching-upload-offset" (<a href="#mismatching-offset" class="auto internal xref">Section 7.1</a>).<a href="#section-4.4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.4.2-4">If the upload is already complete (<a href="#upload-complete" class="auto internal xref">Section 4.1.2</a>), the server <span class="bcp14">MUST NOT</span> modify the upload resource and <span class="bcp14">MUST</span> reject the request. The server can use the problem type <span>[<a href="#PROBLEM" class="cite xref">PROBLEM</a>]</span> of "https://iana.org/assignments/http-problem-types#completed-upload" in the response (<a href="#completed-upload" class="auto internal xref">Section 7.2</a>).<a href="#section-4.4.2-4" class="pilcrow">¶</a></p>
<p id="section-4.4.2-5">If the <code>Upload-Complete</code> request header field is set to true, the client intends to transfer the remaining representation data in one request. If the request content was fully received, the upload is marked as complete and the upload resource <span class="bcp14">SHOULD</span> generate the response that matches what the resource, that was targeted by the initial upload creation (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>), would have generated if it had received the entire representation in the initial request. However, the response <span class="bcp14">MUST</span> include the <code>Upload-Complete</code> header field with a true value, allowing clients to identify whether a response, in particular error responses, is related to the resumable upload itself or the processing of the upload representation.<a href="#section-4.4.2-5" class="pilcrow">¶</a></p>
<p id="section-4.4.2-6">If the <code>Upload-Complete</code> request header field is set to false, the client intends to transfer the remaining representation over multiple requests. If the request content was fully received, the upload resource acknowledges the appended data by sending a <code>2xx (Successful)</code> response.<a href="#section-4.4.2-6" class="pilcrow">¶</a></p>
<p id="section-4.4.2-7">If the request didn't complete the upload, any response, successful or not, <span class="bcp14">MUST</span> include the <code>Upload-Complete</code> header field with a false value, indicating that this response does not belong to the processing of the uploaded representation.<a href="#section-4.4.2-7" class="pilcrow">¶</a></p>
<p id="section-4.4.2-8">The upload resource <span class="bcp14">MUST</span> record the length according to <a href="#upload-length" class="auto internal xref">Section 4.1.3</a> if the necessary header fields are included in the request. If the length is known, the upload resource <span class="bcp14">MUST</span> prevent the offset from exceeding the upload length by stopping to append bytes once the offset reaches the length, rejecting the request, marking the upload resource invalid and rejecting any further interaction with it. It is not sufficient to rely on the <code>Content-Length</code> header field for enforcement because the header field might not be present.<a href="#section-4.4.2-8" class="pilcrow">¶</a></p>
<p id="section-4.4.2-9">While the request content is being received, the server <span class="bcp14">SHOULD</span> send interim responses with a <code>104 (Upload Resumption Supported)</code> status code and the <code>Upload-Offset</code> header field set to the current offset to inform the client about the upload progress. These interim responses <span class="bcp14">MUST NOT</span> include the <code>Location</code> header field.<a href="#section-4.4.2-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="upload-appending-example">
<section id="section-4.4.3">
          <h4 id="name-example-2">
<a href="#section-4.4.3" class="section-number selfRef">4.4.3. </a><a href="#name-example-2" class="section-name selfRef">Example</a>
          </h4>
<p id="section-4.4.3-1">A) The following example shows an upload append request. The client transfers the next 100 bytes at an offset of 100 and does not indicate that the upload is then completed. The server generates one interim response and finally acknowledges the new offset:<a href="#section-4.4.3-1" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-4.4.3-2">
<pre>
PATCH /upload/b530ce8ff HTTP/1.1
Host: example.com
Upload-Complete: ?0
Upload-Offset: 100
Content-Length: 100
Content-Type: application/partial-upload

[content (100 bytes)]
</pre><a href="#section-4.4.3-2" class="pilcrow">¶</a>
</div>
<div class="lang-http-message sourcecode" id="section-4.4.3-3">
<pre>
HTTP/1.1 104 Upload Resumption Supported
Upload-Offset: 150

HTTP/1.1 204 No Content
Upload-Complete: ?0
</pre><a href="#section-4.4.3-3" class="pilcrow">¶</a>
</div>
<p id="section-4.4.3-4">B) The next example shows an upload append, where the client transfers the remaining 200 bytes and completes the upload. The server processes the uploaded representation and generates the responding response, in this example containing extracted meta data:<a href="#section-4.4.3-4" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-4.4.3-5">
<pre>
PATCH /upload/b530ce8ff HTTP/1.1
Host: example.com
Upload-Complete: ?1
Upload-Offset: 200
Content-Length: 100
Content-Type: application/partial-upload

[content (100 bytes)]
</pre><a href="#section-4.4.3-5" class="pilcrow">¶</a>
</div>
<div class="lang-http-message sourcecode" id="section-4.4.3-6">
<pre>
HTTP/1.1 200 OK
Upload-Complete: ?1
Content-Type: application/json

{
  "metadata": {
    [...]
  }
}
</pre><a href="#section-4.4.3-6" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="upload-cancellation">
<section id="section-4.5">
        <h3 id="name-upload-cancellation-2">
<a href="#section-4.5" class="section-number selfRef">4.5. </a><a href="#name-upload-cancellation-2" class="section-name selfRef">Upload Cancellation</a>
        </h3>
<div id="client-behavior-3">
<section id="section-4.5.1">
          <h4 id="name-client-behavior-4">
<a href="#section-4.5.1" class="section-number selfRef">4.5.1. </a><a href="#name-client-behavior-4" class="section-name selfRef">Client Behavior</a>
          </h4>
<p id="section-4.5.1-1">If the client wants to terminate the transfer without the ability to resume, it can send a <code>DELETE</code> request to the upload resource. Doing so is an indication that the client is no longer interested in continuing the upload, and that the server can release any resources associated with it.<a href="#section-4.5.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="server-behavior-3">
<section id="section-4.5.2">
          <h4 id="name-server-behavior-4">
<a href="#section-4.5.2" class="section-number selfRef">4.5.2. </a><a href="#name-server-behavior-4" class="section-name selfRef">Server Behavior</a>
          </h4>
<p id="section-4.5.2-1">Upon receiving a <code>DELETE</code> request, the server <span class="bcp14">SHOULD</span> deactivate the upload resource.<a href="#section-4.5.2-1" class="pilcrow">¶</a></p>
<p id="section-4.5.2-2">The server <span class="bcp14">SHOULD</span> terminate any in-flight requests to the upload resource before sending the response by abruptly terminating their HTTP connection(s) or stream(s) as described in <a href="#concurrency" class="auto internal xref">Section 4.6</a>.<a href="#section-4.5.2-2" class="pilcrow">¶</a></p>
<p id="section-4.5.2-3">The resource <span class="bcp14">SHOULD NOT</span> generate a response with the <code>301 (Moved Permanently)</code> and <code>302 (Found)</code> status codes because clients might follow the redirect without preserving the <code>DELETE</code> method.<a href="#section-4.5.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="upload-cancellation-example">
<section id="section-4.5.3">
          <h4 id="name-example-3">
<a href="#section-4.5.3" class="section-number selfRef">4.5.3. </a><a href="#name-example-3" class="section-name selfRef">Example</a>
          </h4>
<p id="section-4.5.3-1">The following example shows an upload cancellation:<a href="#section-4.5.3-1" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-4.5.3-2">
<pre>
DELETE /upload/b530ce8ff HTTP/1.1
Host: example.com
</pre><a href="#section-4.5.3-2" class="pilcrow">¶</a>
</div>
<div class="lang-http-message sourcecode" id="section-4.5.3-3">
<pre>
HTTP/1.1 204 No Content
</pre><a href="#section-4.5.3-3" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="concurrency">
<section id="section-4.6">
        <h3 id="name-concurrency">
<a href="#section-4.6" class="section-number selfRef">4.6. </a><a href="#name-concurrency" class="section-name selfRef">Concurrency</a>
        </h3>
<p id="section-4.6-1">Resumable uploads, as defined in this document, do not permit uploading representation data in parallel to the same upload resource. The client <span class="bcp14">MUST NOT</span> perform multiple representation data transfers for the same upload resource in parallel.<a href="#section-4.6-1" class="pilcrow">¶</a></p>
<p id="section-4.6-2">Even if the client is well behaving and doesn't send concurrent requests, network interruptions can occur in such a way that the client considers a request as failed while the server is unaware of the problem and considers the request still ongoing. The client might then try to resume the upload with the best intentions, resulting in concurrent requests from the server's perspective. Therefore, the server <span class="bcp14">MUST</span> take measures to prevent race conditions, data loss and corruption from concurrent requests to append representation data (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) and/or cancellation (<a href="#upload-cancellation" class="auto internal xref">Section 4.5</a>) to the same upload resource. In addition, the server <span class="bcp14">MUST NOT</span> send outdated information in responses when retrieving the offset (<a href="#offset-retrieving" class="auto internal xref">Section 4.3</a>). This means that the offset sent by the server <span class="bcp14">MUST</span> be accepted in a subsequent request to append representation data if no other request to append representation data or cancel was received in the meantime. In other words, clients have to be able to use received offsets.<a href="#section-4.6-2" class="pilcrow">¶</a></p>
<p id="section-4.6-3">The <span class="bcp14">RECOMMENDED</span> approach is as follows: If an upload resource receives a new request to retrieve the offset (<a href="#offset-retrieving" class="auto internal xref">Section 4.3</a>), append representation data (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>), or cancel the upload (<a href="#upload-cancellation" class="auto internal xref">Section 4.5</a>) while a previous request for creating the upload (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>) or appending representation data (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) is still ongoing, the resource <span class="bcp14">SHOULD</span> prevent race conditions, data loss, and corruption by terminating the previous request before processing the new request. Due to network delay and reordering, the resource might still be receiving representation data from an ongoing transfer for the same upload resource, which in the client's perspective has failed. Since the client is not allowed to perform multiple transfers in parallel, the upload resource can assume that the previous attempt has already failed. Therefore, the server <span class="bcp14">MAY</span> abruptly terminate the previous HTTP connection or stream.<a href="#section-4.6-3" class="pilcrow">¶</a></p>
<p id="section-4.6-4">Since implementing this approach is not always technically possible or feasible, other measures can be considered as well. A simpler approach is that the server only processes a new request to retrieve the offset (<a href="#offset-retrieving" class="auto internal xref">Section 4.3</a>), append representation data (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>), or cancellation (<a href="#upload-cancellation" class="auto internal xref">Section 4.5</a>) once all previous requests have been processed. This effectively implements exclusive access to the upload resource through an access lock. However, since network interruptions can occur in ways that cause the request to hang from the server's perspective, it might take the server significant time to realize the interruption and time out the request. During this period, the client will be unable to access the resource and resume the upload, causing friction for the end users. Therefore, the recommended approach is to terminate previous requests to enable quick resumption of uploads.<a href="#section-4.6-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="status-code-104">
<section id="section-5">
      <h2 id="name-status-code-104-upload-resu">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-status-code-104-upload-resu" class="section-name selfRef">Status Code <code>104 (Upload Resumption Supported)</code></a>
      </h2>
<p id="section-5-1">The <code>104 (Upload Resumption Supported)</code> status code is can be used for two purposes:<a href="#section-5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-2.1">
          <p id="section-5-2.1.1">When responding to requests to create uploads, an interim response with the <code>104 (Upload Resumption Supported)</code> status code can be sent to indicate the server's support for resumable uploads, as well as the URI and limits of the corresponding upload resource in the <code>Location</code> and <code>Upload-Limit</code> header fields, respectively (see <a href="#upload-creation" class="auto internal xref">Section 4.2</a>). This notifies the client early about the ability to resume the upload in case of network interruptions.<a href="#section-5-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-2.2">
          <p id="section-5-2.2.1">While processing the content of a request to append representation data or create an upload, the server can regularly send interim responses with the <code>104 (Upload Resumption Supported)</code> status code to indicate the current upload progress in the <code>Upload-Offset</code> header field (see <a href="#upload-creation" class="auto internal xref">Section 4.2</a> and <a href="#upload-appending" class="auto internal xref">Section 4.4</a>). This allows the client to show more accurate progress information about the amount of data receive by the server. In addition, clients can use this information to release representation data that was buffered, knowing that it doesn't have to be re-transmitted.<a href="#section-5-2.2.1" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="media-type-partial-upload">
<section id="section-6">
      <h2 id="name-media-type-application-part">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-media-type-application-part" class="section-name selfRef">Media Type <code>application/partial-upload</code></a>
      </h2>
<p id="section-6-1">The <code>application/partial-upload</code> media type describes a contiguous block from the representation data that should be uploaded to a resource. There is no minimum block size and the block might be empty. The block can be a subset of the representation data, where the start and/or end of the block don't line up with the start and/or end of the representation data respectively.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="problem-types">
<section id="section-7">
      <h2 id="name-problem-types">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-problem-types" class="section-name selfRef">Problem Types</a>
      </h2>
<div id="mismatching-offset">
<section id="section-7.1">
        <h3 id="name-mismatching-offset">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-mismatching-offset" class="section-name selfRef">Mismatching Offset</a>
        </h3>
<p id="section-7.1-1">This section defines the "https://iana.org/assignments/http-problem-types#mismatching-upload-offset" problem type <span>[<a href="#PROBLEM" class="cite xref">PROBLEM</a>]</span>. A server can use this problem type when responding to an upload append request (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) to indicate that the <code>Upload-Offset</code> header field in the request does not match the upload resource's offset.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">Two problem type extension members are defined: the <code>expected-offset</code> and <code>provided-offset</code> members. A response using this problem type <span class="bcp14">SHOULD</span> populate both members, with the value of <code>expected-offset</code> taken from the upload resource and the value of <code>provided-offset</code> taken from the upload append request.<a href="#section-7.1-2" class="pilcrow">¶</a></p>
<p id="section-7.1-3">The following example shows an example response, where the resource's offset was 100, but the client attempted to append at offset 200:<a href="#section-7.1-3" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-7.1-4">
<pre>
# NOTE: '\' line wrapping per RFC 8792

HTTP/1.1 409 Conflict
Content-Type: application/problem+json

{
  "type":"https://iana.org/assignments/http-problem-types#\
    mismatching-upload-offset",
  "title": "offset from request does not match offset of resource",
  "expected-offset": 100,
  "provided-offset": 200
}
</pre><a href="#section-7.1-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="completed-upload">
<section id="section-7.2">
        <h3 id="name-completed-upload">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-completed-upload" class="section-name selfRef">Completed Upload</a>
        </h3>
<p id="section-7.2-1">This section defines the "https://iana.org/assignments/http-problem-types#completed-upload" problem type <span>[<a href="#PROBLEM" class="cite xref">PROBLEM</a>]</span>. A server can use this problem type when responding to an upload append request (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) to indicate that the upload has already been completed and cannot be modified.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2-2">The following example shows an example response:<a href="#section-7.2-2" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-7.2-3">
<pre>
# NOTE: '\' line wrapping per RFC 8792

HTTP/1.1 400 Bad Request
Content-Type: application/problem+json

{
  "type":"https://iana.org/assignments/http-problem-types#\
    completed-upload",
  "title": "upload is already completed"
}
</pre><a href="#section-7.2-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="inconsistent-length">
<section id="section-7.3">
        <h3 id="name-inconsistent-length">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-inconsistent-length" class="section-name selfRef">Inconsistent Length</a>
        </h3>
<p id="section-7.3-1">This section defines the "https://iana.org/assignments/http-problem-types#inconsistent-upload-length" problem type <span>[<a href="#PROBLEM" class="cite xref">PROBLEM</a>]</span>. A server can use this problem type when responding to an upload creation (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>) or upload append request (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) to indicate that the request includes inconsistent upload length values, as described in <a href="#upload-length" class="auto internal xref">Section 4.1.3</a>.<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<p id="section-7.3-2">The following example shows an example response:<a href="#section-7.3-2" class="pilcrow">¶</a></p>
<div class="lang-http-message sourcecode" id="section-7.3-3">
<pre>
# NOTE: '\' line wrapping per RFC 8792

HTTP/1.1 400 Bad Request
Content-Type: application/problem+json

{
  "type":"https://iana.org/assignments/http-problem-types#\
    inconsistent-upload-length",
  "title": "inconsistent length values for upload"
}
</pre><a href="#section-7.3-3" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="content-codings">
<section id="section-8">
      <h2 id="name-content-codings">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-content-codings" class="section-name selfRef">Content Codings</a>
      </h2>
<p id="section-8-1">Since the codings listed in <code>Content-Encoding</code> are a characteristic of the representation (see <span><a href="https://rfc-editor.org/rfc/rfc9110#section-8.4" class="relref">Section 8.4</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>), both the client and the server always compute the values for <code>Upload-Offset</code> and optionally <code>Upload-Length</code> on the content coded data (that is, the representation data). Moreover, the content codings are retained throughout the entire upload, meaning that the server is not required to decode the representation data to support resumable uploads. See <span><a href="https://rfc-editor.org/rfc/rfc9530#appendix-A" class="relref">Appendix A</a> of [<a href="#DIGEST-FIELDS" class="cite xref">DIGEST-FIELDS</a>]</span> for more information.<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="transfer-codings">
<section id="section-9">
      <h2 id="name-transfer-codings">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-transfer-codings" class="section-name selfRef">Transfer Codings</a>
      </h2>
<p id="section-9-1">Unlike <code>Content-Encoding</code> (see <span><a href="https://rfc-editor.org/rfc/rfc9110#section-8.4.1" class="relref">Section 8.4.1</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>), <code>Transfer-Encoding</code> (see <span><a href="https://rfc-editor.org/rfc/rfc9112#section-6.1" class="relref">Section 6.1</a> of [<a href="#RFC9112" class="cite xref">HTTP/1.1</a>]</span>) is a property of the message, not of the representation. Moreover, transfer codings can be applied in transit (e.g., by proxies). This means that a client does not have to consider the transfer codings to compute the upload offset, while a server is responsible for transfer decoding the message before computing the upload offset. The same applies to the value of <code>Upload-Length</code>. Please note that the <code>Content-Length</code> header field cannot be used in conjunction with the <code>Transfer-Encoding</code> header field.<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="integrity-digests">
<section id="section-10">
      <h2 id="name-integrity-digests">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-integrity-digests" class="section-name selfRef">Integrity Digests</a>
      </h2>
<p id="section-10-1">The integrity of an entire upload or individual upload requests can be verifying using digests from <span>[<a href="#DIGEST-FIELDS" class="cite xref">DIGEST-FIELDS</a>]</span>.<a href="#section-10-1" class="pilcrow">¶</a></p>
<div id="representation-digests">
<section id="section-10.1">
        <h3 id="name-representation-digests">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-representation-digests" class="section-name selfRef">Representation Digests</a>
        </h3>
<p id="section-10.1-1">Representation digests help verify the integrity of the entire representation data that has been uploaded so far, which might strech across multiple requests.<a href="#section-10.1-1" class="pilcrow">¶</a></p>
<p id="section-10.1-2">If the client knows the integrity digest of the entire representation data before creating an upload resource, it can include the <code>Repr-Digest</code> header field when creating an upload (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>). Once the upload is completed, the server can compute the integrity digest of the received representation data and compare it to the provided digest. If the digests don't match, the server <span class="bcp14">SHOULD</span> consider the upload failed, not process the representation further, and signal the failure to the client. This way, the integrity of the entire representation data can be protected.<a href="#section-10.1-2" class="pilcrow">¶</a></p>
<p id="section-10.1-3">Alternatively, when creating an upload (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>), the client can ask the server to compute and return the integrity digests using a <code>Want-Repr-Digest</code> field conveying the preferred algorithms.
The response <span class="bcp14">SHOULD</span> include at least one of the requested digests, but might not include it.
The server <span class="bcp14">SHOULD</span> compute the representation digests using the preferred algorithms once the upload is complete and include the corresponding <code>Repr-Digest</code> header field in the response.
Alternatively, the server can compute the digest continuously during the upload and include the <code>Repr-Digest</code> header field in responses to upload creation (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>) and upload appending requests (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) even when the upload is not completed yet.
This allows the client to simultaneously compute the digest of the transmitted representation data, compare its digest to the server's digest, and spot data integrity issues.
If an upload is spread across multiple requests, data integrity issues can be found even before the upload is fully completed.<a href="#section-10.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="content-digests">
<section id="section-10.2">
        <h3 id="name-content-digests">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-content-digests" class="section-name selfRef">Content Digests</a>
        </h3>
<p id="section-10.2-1">Content digests help verify the integrity of the content in an individual request.<a href="#section-10.2-1" class="pilcrow">¶</a></p>
<p id="section-10.2-2">If the client knows the integrity digest of the content from an upload creation (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>) or upload appending (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) request, it can include the <code>Content-Digest</code> header field in the request. Once the content has been received, the server can compute the integrity digest of the received content and compare it to the provided digest. If the digests don't match the server <span class="bcp14">SHOULD</span> consider the transfer failed, not append the content to the upload resource, and signal the failure to the client. This way, the integrity of an individual request can be protected.<a href="#section-10.2-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="responses-to-uploads">
<section id="section-11">
      <h2 id="name-responses-to-uploads">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-responses-to-uploads" class="section-name selfRef">Responses to Uploads</a>
      </h2>
<p id="section-11-1">HTTP uploads often not only transfer a representation to the server but also send back information to the client. For resumable uploads, this works similar to conventional HTTP uploads. The server can include information in the response to the request, which transferred the remaining representation data and included the <code>Upload-Complete: ?1</code> header field. Clients can regard this response as the final response for the entire upload, as detailed in <a href="#upload-creation" class="auto internal xref">Section 4.2</a> and <a href="#upload-appending" class="auto internal xref">Section 4.4</a>.<a href="#section-11-1" class="pilcrow">¶</a></p>
<p id="section-11-2">However, due to network interruptions, the upload resource might receive the remaining representation data, complete the upload, and send a response to the client, which then does not receive the response. The client can learn that the upload is complete by retrieving its state (<a href="#offset-retrieving" class="auto internal xref">Section 4.3</a>), but resumable uploads as defined in this document do not offer functionality to recover the missed response.<a href="#section-11-2" class="pilcrow">¶</a></p>
<p id="section-11-3">To address this issue, the server can send the desired information in header fields, which are included in both the final response and responses when the client fetches the upload state via a HEAD request (<a href="#offset-retrieving" class="auto internal xref">Section 4.3</a>). This way, the client can retrieve the information from the header even if it failed to receive the final response. If the piece of information is too large for header fields, the server could make it available as a separate resource for retrieval and point the client to its URI in an appropriate header field.<a href="#section-11-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="upload-strategies">
<section id="section-12">
      <h2 id="name-upload-strategies">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-upload-strategies" class="section-name selfRef">Upload Strategies</a>
      </h2>
<p id="section-12-1">The definition of the upload creation request (<a href="#upload-creation" class="auto internal xref">Section 4.2</a>) provides the client with flexibility to choose whether the representation data is fully or partially transferred in the first request, or if no representation data is included at all. Which behavior is best largely depends on the client's capabilities, its intention to avoid data re-transmission, and its knowledge about the server's support for resumable uploads.<a href="#section-12-1" class="pilcrow">¶</a></p>
<p id="section-12-2">The following subsections describe two typical upload strategies that are suited for common environments. Note that these modes are never explicitly communicated to the server and clients are not required to stick to one strategy, but can mix and adapt them to their needs.<a href="#section-12-2" class="pilcrow">¶</a></p>
<div id="optimistic-upload-creation">
<section id="section-12.1">
        <h3 id="name-optimistic-upload-creation">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-optimistic-upload-creation" class="section-name selfRef">Optimistic Upload Creation</a>
        </h3>
<p id="section-12.1-1">An "optimistic upload creation" can be used independent of the client's knowledge about the server's support for resumable uploads. However, the client must be capable of handling and processing interim responses. An upload creation request then includes the full representation data because the client anticipates that it will be transferred without interruptions or resumed if an interruption occurs.<a href="#section-12.1-1" class="pilcrow">¶</a></p>
<p id="section-12.1-2">The benefit of this method is that if the upload creation request succeeded, the representation data was transferred in a single request without additional round trips.<a href="#section-12.1-2" class="pilcrow">¶</a></p>
<p id="section-12.1-3">A possible drawback is that the client might be unable to resume an upload. If an upload is interrupted before the client received a <code>104 (Upload Resumption Supported)</code> interim response with the upload resource's URI, the client cannot resume that upload due to the missing URI. The interim response might not be received if the interruption happens too early in the message exchange, the server does not support resumable uploads at all, the server does not support sending the <code>104 (Upload Resumption Supported)</code> interim response, or an intermediary dropped the interim response. Without a 104 response, the client needs to either treat the upload as failed or retry the entire upload creation request if this is allowed by the application.<a href="#section-12.1-3" class="pilcrow">¶</a></p>
<p id="section-12.1-4">A client might wait for a limited duration to receive a 104 (Upload Resumption Supported) interim response before starting to transmit the request content. This way, the client can learn about the resource's support for resumable uploads and/or the upload resource's URI. This is conceptually similar to how a client might wait for a 100 (Continue) interim response (see <span><a href="https://rfc-editor.org/rfc/rfc9110#section-10.1.1" class="relref">Section 10.1.1</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>) before committing to work.<a href="#section-12.1-4" class="pilcrow">¶</a></p>
<div id="upgrading-uploads">
<section id="section-12.1.1">
          <h4 id="name-upgrading-to-resumable-uplo">
<a href="#section-12.1.1" class="section-number selfRef">12.1.1. </a><a href="#name-upgrading-to-resumable-uplo" class="section-name selfRef">Upgrading To Resumable Uploads</a>
          </h4>
<p id="section-12.1.1-1">Optimistic upload creation allows clients and servers to automatically upgrade non-resumable uploads to resumable ones. In a non-resumable upload, the representation is transferred in a single request, usually <code>POST</code> or <code>PUT</code>, without any ability to resume from interruptions. The client can offer the server to upgrade such a request to a resumable upload by adding the <code>Upload-Complete: ?1</code> header field to the original request. The <code>Upload-Length</code> header field <span class="bcp14">SHOULD</span> be added if the representation data's length is known upfront. The request is not changed otherwise.<a href="#section-12.1.1-1" class="pilcrow">¶</a></p>
<p id="section-12.1.1-2">A server that supports resumable uploads at the target URI can create an upload resource and send its URI in a <code>104 (Upload Resumption Supported)</code> interim response for the client to resume the upload after interruptions. A server that does not support resumable uploads or does not want to upgrade to a resumable upload for this request ignores the <code>Upload-Complete: ?1</code> header. The transfer then falls back to a non-resumable upload without additional cost.<a href="#section-12.1.1-2" class="pilcrow">¶</a></p>
<p id="section-12.1.1-3">This upgrade can also be performed transparently by a library or program that acts as a HTTP client by sending requests on behalf of a user. When the user instructs the client to send a non-resumable request, the client can perform the upgrade transparently and handle potential interruptions and resumptions under the hood without involving the user. The last response received by the client is considered the response for the entire upload and should be provided to the user.<a href="#section-12.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="careful-upload-creation">
<section id="section-12.2">
        <h3 id="name-careful-upload-creation">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-careful-upload-creation" class="section-name selfRef">Careful Upload Creation</a>
        </h3>
<p id="section-12.2-1">For a "careful upload creation" the client knows that the server supports resumable uploads and sends an empty upload creation request without including any representation data. Upon successful response reception, the client can use the included upload resource URI to transmit the representation data (<a href="#upload-appending" class="auto internal xref">Section 4.4</a>) and resume the upload at any stage if an interruption occurs. The client should inspect the response for the <code>Upload-Limit</code> header field, which would indicate limits applying to the remaining upload procedure.<a href="#section-12.2-1" class="pilcrow">¶</a></p>
<p id="section-12.2-2">The retransmission of representation data or the ultimate upload failure that can happen with an "optimistic upload creation" is therefore avoided at the expense of an additional request that does not carry representation data.<a href="#section-12.2-2" class="pilcrow">¶</a></p>
<p id="section-12.2-3">This approach is best suited if the client cannot receive interim responses, e.g. due to a limitation in the provided HTTP interface, or if large representations are transferred where the cost of the additional request is minuscule compared to the effort of transferring the representation itself.<a href="#section-12.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-13">
      <h2 id="name-security-considerations">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-13-1">The upload resource URI is the identifier used for modifying the upload. Without further protection of this URI, an attacker may obtain information about an upload, append data to it, or cancel it. To prevent this, the server <span class="bcp14">SHOULD</span> ensure that only authorized clients can access the upload resource. To reduce the risk of unauthorized access, it is <span class="bcp14">RECOMMENDED</span> to generate upload resource URIs in such a way that makes it hard to be guessed by unauthorized clients. In addition, servers may embed information about the storage or processing location of the uploaded representation in the upload resource URI to make routing requests more efficient. If so, they <span class="bcp14">MUST</span> ensure that no internal information is leaked in the URI that is not intended to be exposed.<a href="#section-13-1" class="pilcrow">¶</a></p>
<p id="section-13-2">Uploaded representation data and its metadata are untrusted input. Server operators have to be careful of where uploaded data is written and subsequently accessed, especially if the operations cause the representation to be processed or executed by the server. In addition, metadata <span class="bcp14">MUST</span> be validated and/or sanitized if the server takes its values into consideration for processing or storing the representation.<a href="#section-13-2" class="pilcrow">¶</a></p>
<p id="section-13-3">Some servers or intermediaries provide scanning of content uploaded by clients. Any scanning mechanism that relies on receiving a complete representation in a single request message can be defeated by resumable uploads because content can be split across multiple messages. Servers or intermediaries wishing to perform content scanning <span class="bcp14">SHOULD</span> consider how resumable uploads can circumvent scanning and take appropriate measures. Possible strategies include waiting for the upload to complete before scanning the entire representation, or disabling resumable uploads.<a href="#section-13-3" class="pilcrow">¶</a></p>
<p id="section-13-4">Resumable uploads are vulnerable to Slowloris-style attacks <span>[<a href="#SLOWLORIS" class="cite xref">SLOWLORIS</a>]</span>. A malicious client may create upload resources and keep them alive by regularly sending <code>PATCH</code> requests with no or small content to the upload resources. This could be abused to exhaust server resources by creating and holding open uploads indefinitely with minimal work. Servers <span class="bcp14">SHOULD</span> provide mitigations for Slowloris attacks, such as increasing the maximum number of clients the server will allow, limiting the number of uploads a single client is allowed to make, imposing restrictions on the minimum transfer speed an upload is allowed to have, and restricting the length of time an upload resource can exist.<a href="#section-13-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-14">
      <h2 id="name-iana-considerations">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="http-fields">
<section id="section-14.1">
        <h3 id="name-http-fields">
<a href="#section-14.1" class="section-number selfRef">14.1. </a><a href="#name-http-fields" class="section-name selfRef">HTTP Fields</a>
        </h3>
<p id="section-14.1-1">IANA is asked to register the following entries in the "Hypertext Transfer Protocol (HTTP) Field Name Registry":<a href="#section-14.1-1" class="pilcrow">¶</a></p>
<table class="center" id="table-1">
          <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Field Name</th>
              <th class="text-left" rowspan="1" colspan="1">Status</th>
              <th class="text-left" rowspan="1" colspan="1">Structured Type</th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Upload-Offset</td>
              <td class="text-left" rowspan="1" colspan="1">permanent</td>
              <td class="text-left" rowspan="1" colspan="1">Item</td>
              <td class="text-left" rowspan="1" colspan="1">
                <a href="#upload-offset" class="auto internal xref">Section 4.1.1</a> of this document</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Upload-Complete</td>
              <td class="text-left" rowspan="1" colspan="1">permanent</td>
              <td class="text-left" rowspan="1" colspan="1">Item</td>
              <td class="text-left" rowspan="1" colspan="1">
                <a href="#upload-complete" class="auto internal xref">Section 4.1.2</a> of this document</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Upload-Length</td>
              <td class="text-left" rowspan="1" colspan="1">permanent</td>
              <td class="text-left" rowspan="1" colspan="1">Item</td>
              <td class="text-left" rowspan="1" colspan="1">
                <a href="#upload-length" class="auto internal xref">Section 4.1.3</a> of this document</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Upload-Limit</td>
              <td class="text-left" rowspan="1" colspan="1">permanent</td>
              <td class="text-left" rowspan="1" colspan="1">Dictionary</td>
              <td class="text-left" rowspan="1" colspan="1">
                <a href="#upload-limit" class="auto internal xref">Section 4.1.4</a> of this document</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="http-status-code">
<section id="section-14.2">
        <h3 id="name-http-status-code">
<a href="#section-14.2" class="section-number selfRef">14.2. </a><a href="#name-http-status-code" class="section-name selfRef">HTTP Status Code</a>
        </h3>
<p id="section-14.2-1">IANA is asked to register the following entry in the "HTTP Status Codes" registry:<a href="#section-14.2-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-14.2-2">
          <dt id="section-14.2-2.1">Value:</dt>
          <dd style="margin-left: 1.5em" id="section-14.2-2.2">
            <p id="section-14.2-2.2.1">104 (suggested value)<a href="#section-14.2-2.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.2-2.3">Description:</dt>
          <dd style="margin-left: 1.5em" id="section-14.2-2.4">
            <p id="section-14.2-2.4.1">Upload Resumption Supported<a href="#section-14.2-2.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.2-2.5">Specification:</dt>
          <dd style="margin-left: 1.5em" id="section-14.2-2.6">
            <p id="section-14.2-2.6.1"><a href="#status-code-104" class="auto internal xref">Section 5</a> of this document<a href="#section-14.2-2.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="media-type">
<section id="section-14.3">
        <h3 id="name-media-type">
<a href="#section-14.3" class="section-number selfRef">14.3. </a><a href="#name-media-type" class="section-name selfRef">Media Type</a>
        </h3>
<p id="section-14.3-1">IANA is asked to register the following entry in the "Media Types" registry:<a href="#section-14.3-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-14.3-2">
          <dt id="section-14.3-2.1">Type name:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-2.2">
            <p id="section-14.3-2.2.1">application<a href="#section-14.3-2.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.3-2.3">Subtype name:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-2.4">
            <p id="section-14.3-2.4.1">partial-upload<a href="#section-14.3-2.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.3-2.5">Required parameters:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-2.6">
            <p id="section-14.3-2.6.1">N/A<a href="#section-14.3-2.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.3-2.7">Optional parameters:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-2.8">
            <p id="section-14.3-2.8.1">N/A<a href="#section-14.3-2.8.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.3-2.9">Encoding considerations:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-2.10">
            <p id="section-14.3-2.10.1">binary<a href="#section-14.3-2.10.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.3-2.11">Security considerations:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-2.12">
            <p id="section-14.3-2.12.1">see <a href="#security-considerations" class="auto internal xref">Section 13</a> of this document<a href="#section-14.3-2.12.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.3-2.13">Interoperability considerations:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-2.14">
            <p id="section-14.3-2.14.1">N/A<a href="#section-14.3-2.14.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.3-2.15">Published specification:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-2.16">
            <p id="section-14.3-2.16.1"><a href="#media-type-partial-upload" class="auto internal xref">Section 6</a> of this document<a href="#section-14.3-2.16.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.3-2.17">Applications that use this media type:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-2.18">
            <p id="section-14.3-2.18.1">Applications that transfer files over unreliable networks or want pause- and resumable uploads.<a href="#section-14.3-2.18.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.3-2.19">Fragment identifier considerations:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-2.20">
            <p id="section-14.3-2.20.1">N/A<a href="#section-14.3-2.20.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-14.3-3">Additional information:<a href="#section-14.3-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-14.3-4.1">
            <p id="section-14.3-4.1.1">Deprecated alias names for this type: N/A<a href="#section-14.3-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-14.3-4.2">
            <p id="section-14.3-4.2.1">Magic number(s): N/A<a href="#section-14.3-4.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-14.3-4.3">
            <p id="section-14.3-4.3.1">File extension(s): N/A<a href="#section-14.3-4.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-14.3-4.4">
            <p id="section-14.3-4.4.1">Macintosh file type code(s): N/A<a href="#section-14.3-4.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-14.3-4.5">
            <p id="section-14.3-4.5.1">Windows Clipboard Name: N/A<a href="#section-14.3-4.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<span class="break"></span><dl class="dlParallel" id="section-14.3-5">
          <dt id="section-14.3-5.1">Person and email address to contact for further information:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-5.2">
            <p id="section-14.3-5.2.1">See the Authors' Addresses section of this document.<a href="#section-14.3-5.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.3-5.3">Intended usage:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-5.4">
            <p id="section-14.3-5.4.1">COMMON<a href="#section-14.3-5.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.3-5.5">Restrictions on usage:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-5.6">
            <p id="section-14.3-5.6.1">N/A<a href="#section-14.3-5.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.3-5.7">Author:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-5.8">
            <p id="section-14.3-5.8.1">See the Authors' Addresses section of this document.<a href="#section-14.3-5.8.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.3-5.9">Change controller:</dt>
          <dd style="margin-left: 1.5em" id="section-14.3-5.10">
            <p id="section-14.3-5.10.1">IETF<a href="#section-14.3-5.10.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="http-problem-types">
<section id="section-14.4">
        <h3 id="name-http-problem-types">
<a href="#section-14.4" class="section-number selfRef">14.4. </a><a href="#name-http-problem-types" class="section-name selfRef">HTTP Problem Types</a>
        </h3>
<p id="section-14.4-1">IANA is asked to register the following entry in the "HTTP Problem Types" registry:<a href="#section-14.4-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-14.4-2">
          <dt id="section-14.4-2.1">Type URI:</dt>
          <dd style="margin-left: 1.5em" id="section-14.4-2.2">
            <p id="section-14.4-2.2.1">https://iana.org/assignments/http-problem-types#mismatching-upload-offset<a href="#section-14.4-2.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.4-2.3">Title:</dt>
          <dd style="margin-left: 1.5em" id="section-14.4-2.4">
            <p id="section-14.4-2.4.1">Mismatching Upload Offset<a href="#section-14.4-2.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.4-2.5">Recommended HTTP status code:</dt>
          <dd style="margin-left: 1.5em" id="section-14.4-2.6">
            <p id="section-14.4-2.6.1">409<a href="#section-14.4-2.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.4-2.7">Reference:</dt>
          <dd style="margin-left: 1.5em" id="section-14.4-2.8">
            <p id="section-14.4-2.8.1"><a href="#mismatching-offset" class="auto internal xref">Section 7.1</a> of this document<a href="#section-14.4-2.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-14.4-3">IANA is asked to register the following entry in the "HTTP Problem Types" registry:<a href="#section-14.4-3" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-14.4-4">
          <dt id="section-14.4-4.1">Type URI:</dt>
          <dd style="margin-left: 1.5em" id="section-14.4-4.2">
            <p id="section-14.4-4.2.1">https://iana.org/assignments/http-problem-types#completed-upload<a href="#section-14.4-4.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.4-4.3">Title:</dt>
          <dd style="margin-left: 1.5em" id="section-14.4-4.4">
            <p id="section-14.4-4.4.1">Upload Is Completed<a href="#section-14.4-4.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.4-4.5">Recommended HTTP status code:</dt>
          <dd style="margin-left: 1.5em" id="section-14.4-4.6">
            <p id="section-14.4-4.6.1">400<a href="#section-14.4-4.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.4-4.7">Reference:</dt>
          <dd style="margin-left: 1.5em" id="section-14.4-4.8">
            <p id="section-14.4-4.8.1"><a href="#completed-upload" class="auto internal xref">Section 7.2</a> of this document<a href="#section-14.4-4.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-14.4-5">IANA is asked to register the following entry in the "HTTP Problem Types" registry:<a href="#section-14.4-5" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-14.4-6">
          <dt id="section-14.4-6.1">Type URI:</dt>
          <dd style="margin-left: 1.5em" id="section-14.4-6.2">
            <p id="section-14.4-6.2.1">https://iana.org/assignments/http-problem-types#inconsistent-upload-length<a href="#section-14.4-6.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.4-6.3">Title:</dt>
          <dd style="margin-left: 1.5em" id="section-14.4-6.4">
            <p id="section-14.4-6.4.1">Inconsistent Upload Length Values<a href="#section-14.4-6.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.4-6.5">Recommended HTTP status code:</dt>
          <dd style="margin-left: 1.5em" id="section-14.4-6.6">
            <p id="section-14.4-6.6.1">400<a href="#section-14.4-6.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-14.4-6.7">Reference:</dt>
          <dd style="margin-left: 1.5em" id="section-14.4-6.8">
            <p id="section-14.4-6.8.1"><a href="#inconsistent-length" class="auto internal xref">Section 7.3</a> of this document<a href="#section-14.4-6.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="sec-combined-references">
<section id="section-15">
      <h2 id="name-references">
<a href="#section-15" class="section-number selfRef">15. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-15.1">
        <h3 id="name-normative-references">
<a href="#section-15.1" class="section-number selfRef">15.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="CACHING">[CACHING]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP Caching"</span>, <span class="seriesInfo">STD 98</span>, <span class="seriesInfo">RFC 9111</span>, <span class="seriesInfo">DOI 10.17487/RFC9111</span>, <time datetime="2022-06" class="refDate">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9111">https://www.rfc-editor.org/rfc/rfc9111</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="CONTENT-DISPOSITION">[CONTENT-DISPOSITION]</dt>
        <dd>
<span class="refAuthor">Reschke, J.</span>, <span class="refTitle">"Use of the Content-Disposition Header Field in the Hypertext Transfer Protocol (HTTP)"</span>, <span class="seriesInfo">RFC 6266</span>, <span class="seriesInfo">DOI 10.17487/RFC6266</span>, <time datetime="2011-06" class="refDate">June 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6266">https://www.rfc-editor.org/rfc/rfc6266</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="DIGEST-FIELDS">[DIGEST-FIELDS]</dt>
        <dd>
<span class="refAuthor">Polli, R.</span> and <span class="refAuthor">L. Pardue</span>, <span class="refTitle">"Digest Fields"</span>, <span class="seriesInfo">RFC 9530</span>, <span class="seriesInfo">DOI 10.17487/RFC9530</span>, <time datetime="2024-02" class="refDate">February 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9530">https://www.rfc-editor.org/rfc/rfc9530</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="HTTP">[HTTP]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP Semantics"</span>, <span class="seriesInfo">STD 97</span>, <span class="seriesInfo">RFC 9110</span>, <span class="seriesInfo">DOI 10.17487/RFC9110</span>, <time datetime="2022-06" class="refDate">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9110">https://www.rfc-editor.org/rfc/rfc9110</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9112">[HTTP/1.1]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP/1.1"</span>, <span class="seriesInfo">STD 99</span>, <span class="seriesInfo">RFC 9112</span>, <span class="seriesInfo">DOI 10.17487/RFC9112</span>, <time datetime="2022-06" class="refDate">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9112">https://www.rfc-editor.org/rfc/rfc9112</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="PATCH">[PATCH]</dt>
        <dd>
<span class="refAuthor">Dusseault, L.</span> and <span class="refAuthor">J. Snell</span>, <span class="refTitle">"PATCH Method for HTTP"</span>, <span class="seriesInfo">RFC 5789</span>, <span class="seriesInfo">DOI 10.17487/RFC5789</span>, <time datetime="2010-03" class="refDate">March 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5789">https://www.rfc-editor.org/rfc/rfc5789</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="PROBLEM">[PROBLEM]</dt>
        <dd>
<span class="refAuthor">Nottingham, M.</span>, <span class="refAuthor">Wilde, E.</span>, and <span class="refAuthor">S. Dalal</span>, <span class="refTitle">"Problem Details for HTTP APIs"</span>, <span class="seriesInfo">RFC 9457</span>, <span class="seriesInfo">DOI 10.17487/RFC9457</span>, <time datetime="2023-07" class="refDate">July 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9457">https://www.rfc-editor.org/rfc/rfc9457</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="STRUCTURED-FIELDS">[STRUCTURED-FIELDS]</dt>
      <dd>
<span class="refAuthor">Nottingham, M.</span> and <span class="refAuthor">P. Kamp</span>, <span class="refTitle">"Structured Field Values for HTTP"</span>, <span class="seriesInfo">RFC 9651</span>, <span class="seriesInfo">DOI 10.17487/RFC9651</span>, <time datetime="2024-09" class="refDate">September 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9651">https://www.rfc-editor.org/rfc/rfc9651</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-15.2">
        <h3 id="name-informative-references">
<a href="#section-15.2" class="section-number selfRef">15.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC8792">[RFC8792]</dt>
        <dd>
<span class="refAuthor">Watsen, K.</span>, <span class="refAuthor">Auerswald, E.</span>, <span class="refAuthor">Farrel, A.</span>, and <span class="refAuthor">Q. Wu</span>, <span class="refTitle">"Handling Long Lines in Content of Internet-Drafts and RFCs"</span>, <span class="seriesInfo">RFC 8792</span>, <span class="seriesInfo">DOI 10.17487/RFC8792</span>, <time datetime="2020-06" class="refDate">June 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8792">https://www.rfc-editor.org/rfc/rfc8792</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SLOWLORIS">[SLOWLORIS]</dt>
      <dd>
<span class="refAuthor">"RSnake" Hansen, R.</span>, <span class="refTitle">"Welcome to Slowloris - the low bandwidth, yet greedy and poisonous HTTP client!"</span>, <time datetime="2009-06" class="refDate">June 2009</time>, <span>&lt;<a href="https://web.archive.org/web/20150315054838/http://ha.ckers.org/slowloris/">https://web.archive.org/web/20150315054838/http://ha.ckers.org/slowloris/</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="changes">
<section id="appendix-A">
      <h2 id="name-changes">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-changes" class="section-name selfRef">Changes</a>
      </h2>
<p id="appendix-A-1">This section is to be removed before publishing as an RFC.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<div id="since-draft-ietf-httpbis-resumable-upload-09">
<section id="appendix-A.1">
        <h3 id="name-since-draft-ietf-httpbis-re">
<a href="#name-since-draft-ietf-httpbis-re" class="section-name selfRef">Since draft-ietf-httpbis-resumable-upload-09</a>
        </h3>
<p id="appendix-A.1-1">None yet<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="since-draft-ietf-httpbis-resumable-upload-08">
<section id="appendix-A.2">
        <h3 id="name-since-draft-ietf-httpbis-res">
<a href="#name-since-draft-ietf-httpbis-res" class="section-name selfRef">Since draft-ietf-httpbis-resumable-upload-08</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.2-1.1">
            <p id="appendix-A.2-1.1.1">Clarify definitions of new header fields.<a href="#appendix-A.2-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-1.2">
            <p id="appendix-A.2-1.2.1">Make handling of OPTIONS * optional.<a href="#appendix-A.2-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-1.3">
            <p id="appendix-A.2-1.3.1">Require server to announce limits using Upload-Limit.<a href="#appendix-A.2-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-1.4">
            <p id="appendix-A.2-1.4.1">Require clients to adhere to known limits.<a href="#appendix-A.2-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-1.5">
            <p id="appendix-A.2-1.5.1">Rephrase requirements for concurrency handling, focusing on the outcome.<a href="#appendix-A.2-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-1.6">
            <p id="appendix-A.2-1.6.1">Remove requirement for 204 status code for DELETE responses.<a href="#appendix-A.2-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-1.7">
            <p id="appendix-A.2-1.7.1">Increase the draft interop version.<a href="#appendix-A.2-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-1.8">
            <p id="appendix-A.2-1.8.1">Add section about 104 status code.<a href="#appendix-A.2-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-1.9">
            <p id="appendix-A.2-1.9.1">Rephrase recommendation for sending information back to client.<a href="#appendix-A.2-1.9.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-resumable-upload-07">
<section id="appendix-A.3">
        <h3 id="name-since-draft-ietf-httpbis-resu">
<a href="#name-since-draft-ietf-httpbis-resu" class="section-name selfRef">Since draft-ietf-httpbis-resumable-upload-07</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.3-1.1">
            <p id="appendix-A.3-1.1.1">Clarify server handling when upload length is exceeded.<a href="#appendix-A.3-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.3-1.2">
            <p id="appendix-A.3-1.2.1">Extend security considerations about upload resource URIs, representation metadata, and untrusted inputs.<a href="#appendix-A.3-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.3-1.3">
            <p id="appendix-A.3-1.3.1">Allow clients to retry for appropriate 4xx responses.<a href="#appendix-A.3-1.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-resumable-upload-06">
<section id="appendix-A.4">
        <h3 id="name-since-draft-ietf-httpbis-resum">
<a href="#name-since-draft-ietf-httpbis-resum" class="section-name selfRef">Since draft-ietf-httpbis-resumable-upload-06</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.4-1.1">
            <p id="appendix-A.4-1.1.1">Minor editorial improvements to introduction and examples.<a href="#appendix-A.4-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.4-1.2">
            <p id="appendix-A.4-1.2.1">Define structured types for new header fields.<a href="#appendix-A.4-1.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-resumable-upload-05">
<section id="appendix-A.5">
        <h3 id="name-since-draft-ietf-httpbis-resuma">
<a href="#name-since-draft-ietf-httpbis-resuma" class="section-name selfRef">Since draft-ietf-httpbis-resumable-upload-05</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.5-1.1">
            <p id="appendix-A.5-1.1.1">Increase the draft interop version.<a href="#appendix-A.5-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.5-1.2">
            <p id="appendix-A.5-1.2.1">Numerous editorial changes.<a href="#appendix-A.5-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.5-1.3">
            <p id="appendix-A.5-1.3.1">Rename <code>expires</code> limit to <code>max-age</code>.<a href="#appendix-A.5-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.5-1.4">
            <p id="appendix-A.5-1.4.1">Require <code>Upload-Complete</code>, but not <code>Upload-Offset</code> or <code>Upload-Limit</code>, for append responses.<a href="#appendix-A.5-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.5-1.5">
            <p id="appendix-A.5-1.5.1">Add problem type for inconsistent length values.<a href="#appendix-A.5-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.5-1.6">
            <p id="appendix-A.5-1.6.1">Reduce use of "file" in favor of "representation".<a href="#appendix-A.5-1.6.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-resumable-upload-04">
<section id="appendix-A.6">
        <h3 id="name-since-draft-ietf-httpbis-resumab">
<a href="#name-since-draft-ietf-httpbis-resumab" class="section-name selfRef">Since draft-ietf-httpbis-resumable-upload-04</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.6-1.1">
            <p id="appendix-A.6-1.1.1">Clarify implications of <code>Upload-Limit</code> header.<a href="#appendix-A.6-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.6-1.2">
            <p id="appendix-A.6-1.2.1">Allow client to fetch upload limits upfront via <code>OPTIONS</code>.<a href="#appendix-A.6-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.6-1.3">
            <p id="appendix-A.6-1.3.1">Add guidance on upload creation strategy.<a href="#appendix-A.6-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.6-1.4">
            <p id="appendix-A.6-1.4.1">Add <code>Upload-Length</code> header to indicate length during creation.<a href="#appendix-A.6-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.6-1.5">
            <p id="appendix-A.6-1.5.1">Describe possible usage of <code>Want-Repr-Digest</code>.<a href="#appendix-A.6-1.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-resumable-upload-03">
<section id="appendix-A.7">
        <h3 id="name-since-draft-ietf-httpbis-resumabl">
<a href="#name-since-draft-ietf-httpbis-resumabl" class="section-name selfRef">Since draft-ietf-httpbis-resumable-upload-03</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.7-1.1">
            <p id="appendix-A.7-1.1.1">Add note about <code>Content-Location</code> for referring to subsequent resources.<a href="#appendix-A.7-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.7-1.2">
            <p id="appendix-A.7-1.2.1">Require <code>application/partial-upload</code> for appending to uploads.<a href="#appendix-A.7-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.7-1.3">
            <p id="appendix-A.7-1.3.1">Explain handling of content and transfer codings.<a href="#appendix-A.7-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.7-1.4">
            <p id="appendix-A.7-1.4.1">Add problem types for mismatching offsets and completed uploads.<a href="#appendix-A.7-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.7-1.5">
            <p id="appendix-A.7-1.5.1">Clarify that completed uploads must not be appended to.<a href="#appendix-A.7-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.7-1.6">
            <p id="appendix-A.7-1.6.1">Describe interaction with Digest Fields from RFC9530.<a href="#appendix-A.7-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.7-1.7">
            <p id="appendix-A.7-1.7.1">Require that upload offset does not decrease over time.<a href="#appendix-A.7-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.7-1.8">
            <p id="appendix-A.7-1.8.1">Add Upload-Limit header field.<a href="#appendix-A.7-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.7-1.9">
            <p id="appendix-A.7-1.9.1">Increase the draft interop version.<a href="#appendix-A.7-1.9.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-resumable-upload-02">
<section id="appendix-A.8">
        <h3 id="name-since-draft-ietf-httpbis-resumable">
<a href="#name-since-draft-ietf-httpbis-resumable" class="section-name selfRef">Since draft-ietf-httpbis-resumable-upload-02</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.8-1.1">
            <p id="appendix-A.8-1.1.1">Add upload progress notifications via informational responses.<a href="#appendix-A.8-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.8-1.2">
            <p id="appendix-A.8-1.2.1">Add security consideration regarding request filtering.<a href="#appendix-A.8-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.8-1.3">
            <p id="appendix-A.8-1.3.1">Explain the use of empty requests for creation uploads and appending.<a href="#appendix-A.8-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.8-1.4">
            <p id="appendix-A.8-1.4.1">Extend security consideration to include resource exhaustion attacks.<a href="#appendix-A.8-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.8-1.5">
            <p id="appendix-A.8-1.5.1">Allow 200 status codes for offset retrieval.<a href="#appendix-A.8-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.8-1.6">
            <p id="appendix-A.8-1.6.1">Increase the draft interop version.<a href="#appendix-A.8-1.6.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-resumable-upload-01">
<section id="appendix-A.9">
        <h3 id="name-since-draft-ietf-httpbis-resumable-">
<a href="#name-since-draft-ietf-httpbis-resumable-" class="section-name selfRef">Since draft-ietf-httpbis-resumable-upload-01</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.9-1.1">
            <p id="appendix-A.9-1.1.1">Replace Upload-Incomplete header with Upload-Complete.<a href="#appendix-A.9-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.9-1.2">
            <p id="appendix-A.9-1.2.1">Replace terminology about procedures with HTTP resources.<a href="#appendix-A.9-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.9-1.3">
            <p id="appendix-A.9-1.3.1">Increase the draft interop version.<a href="#appendix-A.9-1.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-resumable-upload-00">
<section id="appendix-A.10">
        <h3 id="name-since-draft-ietf-httpbis-resumable--2">
<a href="#name-since-draft-ietf-httpbis-resumable--2" class="section-name selfRef">Since draft-ietf-httpbis-resumable-upload-00</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.10-1.1">
            <p id="appendix-A.10-1.1.1">Remove Upload-Token and instead use Server-generated upload URL for upload identification.<a href="#appendix-A.10-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.10-1.2">
            <p id="appendix-A.10-1.2.1">Require the Upload-Incomplete header field in Upload Creation Procedure.<a href="#appendix-A.10-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.10-1.3">
            <p id="appendix-A.10-1.3.1">Increase the draft interop version.<a href="#appendix-A.10-1.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-tus-httpbis-resumable-uploads-protocol-02">
<section id="appendix-A.11">
        <h3 id="name-since-draft-tus-httpbis-res">
<a href="#name-since-draft-tus-httpbis-res" class="section-name selfRef">Since draft-tus-httpbis-resumable-uploads-protocol-02</a>
        </h3>
<p id="appendix-A.11-1">None<a href="#appendix-A.11-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="since-draft-tus-httpbis-resumable-uploads-protocol-01">
<section id="appendix-A.12">
        <h3 id="name-since-draft-tus-httpbis-resu">
<a href="#name-since-draft-tus-httpbis-resu" class="section-name selfRef">Since draft-tus-httpbis-resumable-uploads-protocol-01</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.12-1.1">
            <p id="appendix-A.12-1.1.1">Clarifying backtracking and preventing skipping ahead during the Offset Receiving Procedure.<a href="#appendix-A.12-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.12-1.2">
            <p id="appendix-A.12-1.2.1">Clients auto-retry 404 is no longer allowed.<a href="#appendix-A.12-1.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-tus-httpbis-resumable-uploads-protocol-00">
<section id="appendix-A.13">
        <h3 id="name-since-draft-tus-httpbis-resum">
<a href="#name-since-draft-tus-httpbis-resum" class="section-name selfRef">Since draft-tus-httpbis-resumable-uploads-protocol-00</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.13-1.1">
            <p id="appendix-A.13-1.1.1">Split the Upload Transfer Procedure into the Upload Creation Procedure and the Upload Appending Procedure.<a href="#appendix-A.13-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="draft-version-identification">
<section id="appendix-B">
      <h2 id="name-draft-version-identificatio">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-draft-version-identificatio" class="section-name selfRef">Draft Version Identification</a>
      </h2>
<p id="appendix-B-1">This section is to be removed before publishing as an RFC.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<p id="appendix-B-2">To assist the development of implementations and interoperability testing while this document is still a draft, an interop version is defined. Implementations of this draft use the interop version to identify the iteration of the draft that they implement. The interop version is bumped for breaking changes.<a href="#appendix-B-2" class="pilcrow">¶</a></p>
<p id="appendix-B-3">The current interop version is 8.<a href="#appendix-B-3" class="pilcrow">¶</a></p>
<p id="appendix-B-4">Client implementations of draft versions of the protocol <span class="bcp14">MUST</span> send a header field <code>Upload-Draft-Interop-Version</code> with the interop version as its value to its requests. The <code>Upload-Draft-Interop-Version</code> field value is an Integer.<a href="#appendix-B-4" class="pilcrow">¶</a></p>
<p id="appendix-B-5">Server implementations of draft versions of the protocol <span class="bcp14">MUST NOT</span> send a <code>104 (Upload Resumption Supported)</code> informational response when the interop version indicated by the <code>Upload-Draft-Interop-Version</code> header field in the request is missing or mismatching.<a href="#appendix-B-5" class="pilcrow">¶</a></p>
<p id="appendix-B-6">Server implementations of draft versions of the protocol <span class="bcp14">MUST</span> also send a header field <code>Upload-Draft-Interop-Version</code> with the interop version as its value to the <code>104 (Upload Resumption Supported)</code> informational response.<a href="#appendix-B-6" class="pilcrow">¶</a></p>
<p id="appendix-B-7">Client implementations of draft versions of the protocol <span class="bcp14">MUST</span> ignore a <code>104 (Upload Resumption Supported)</code> informational response with missing or mismatching interop version indicated by the <code>Upload-Draft-Interop-Version</code> header field.<a href="#appendix-B-7" class="pilcrow">¶</a></p>
<p id="appendix-B-8">The reason both the client and the server are sending and checking the draft version is to ensure that implementations of the final RFC will not accidentally interop with draft implementations, as they will not check the existence of the <code>Upload-Draft-Interop-Version</code> header field.<a href="#appendix-B-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-C">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-C-1">This document is based on an Internet-Draft specification written by <span class="contact-name">Jiten Mehta</span>, <span class="contact-name">Stefan Matsson</span>, and the authors of this document.<a href="#appendix-C-1" class="pilcrow">¶</a></p>
<p id="appendix-C-2">The <a href="https://tus.io/">tus v1 protocol</a> is a specification for a resumable file upload protocol over HTTP. It inspired the early design of this protocol. Members of the tus community helped significantly in the process of bringing this work to the IETF.<a href="#appendix-C-2" class="pilcrow">¶</a></p>
<p id="appendix-C-3">The authors would like to thank <span class="contact-name">Mark Nottingham</span> for substantive contributions to the text, and <span class="contact-name">Roy T. Fielding</span> and <span class="contact-name">Julian Reschke</span> for their thorough reviews of the document.<a href="#appendix-C-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-D">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Marius Kleidl (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Transloadit</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:marius@transloadit.com" class="email">marius@transloadit.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Guoye Zhang (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:guoye_zhang@apple.com" class="email">guoye_zhang@apple.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Lucas Pardue (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Cloudflare</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:lucas@lucaspardue.com" class="email">lucas@lucaspardue.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
